{"componentChunkName":"component---src-templates-blog-post-js","path":"/blogs/bilibili-data-mining/","result":{"data":{"site":{"siteMetadata":{"title":"Twistronics Blog"}},"markdownRemark":{"id":"b6a6f832-90b9-5bda-a8c1-77e66b91e366","excerpt":"文件结构 1.前言 - 数据获取 哔哩哔哩弹幕视频网 哔哩哔哩弹幕视频网，简称“B站”，是一个国内的大型视频分享网站，特色是悬浮于视频上方的实时评论功能。与其他视频网站相比，其用户特征非常明显，以25岁以下年轻人为主。 分析网站结构\nbilibili…","html":"<h2>文件结构</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">数据挖掘.zip \n\n\t代码 （这个文件夹里是全部代码）\n\t报告.html  （报告）\n\timg  （报告.html能显示图片用的）</code></pre></div>\n<h2>1.前言 - 数据获取</h2>\n<h3>哔哩哔哩弹幕视频网</h3>\n<p>哔哩哔哩弹幕视频网，简称“B站”，是一个国内的大型视频分享网站，特色是悬浮于视频上方的实时评论功能。与其他视频网站相比，其用户特征非常明显，以25岁以下年轻人为主。</p>\n<ul>\n<li>\n<p>分析网站结构\nbilibili网页文字内容以视频介绍、弹幕等视频相关信息为主，但是可以发现，如果在评论区等地方直接点击用户名，如下所示\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 463px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/52ee335abec35778b95fd131908b8065/71ce0/1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 26.351351351351354%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABHWAAAR1gElLdUyAAAAzElEQVQY021QWw6CMBDkpF7Af+/hDfxRTmI4gN8GxfAhtKVC6ENKx3Y1Kugk02yn2ZntJvCYwnsMw4B74DiORB/p/et53jBFEo99lmG3XcPYgsTicsG1qnHMz+CsBpoc3g2U/W0859sw3aRYLRdgIiNRygacc7Rti7Is0XBGk34+8X/KqJMhExyn4gA39vRwk5LMuq5DVVXBXIQ1OFhraR0RWhuqo4lSGs6554Q/aeEeGyOUUjBGwxoTDDQF6FBHCCHR94oMWQi09k76A9zYg03LEdomAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"1\"\n        title=\"1\"\n        src=\"/static/52ee335abec35778b95fd131908b8065/71ce0/1.png\"\n        srcset=\"/static/52ee335abec35778b95fd131908b8065/12f09/1.png 148w,\n/static/52ee335abec35778b95fd131908b8065/e4a3f/1.png 295w,\n/static/52ee335abec35778b95fd131908b8065/71ce0/1.png 463w\"\n        sizes=\"(max-width: 463px) 100vw, 463px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n这时就会跳转到该用户的详细信息界面，如图\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2781416934d1aa63d389ad5a7c7f9f1f/23266/2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64.1891891891892%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABcRAAAXEQHKJvM/AAADaUlEQVQ4y42S/0/UdRzHP39CttkPrTmJsKQWCpik1pqzpm61YC3LzAWWSAUNrx2FbQzZmE6GqKQI5/FlUJSFgaxiAzE4kODorgPBb8cdHCh3133/8vncNx69jznXjz23596v9+v92vv1ej1fL0nTbeKMZoCaC79wuv4KZ+t+4GLHMKXHLpGy8U2ef62QLQX17CrrZtveap7bXkzKS4dJzfiI9B1H2Xmwjb357WzIyid1Yx7SmebfqatvoeSbi5SXNVB19BTHazr4uPgUqelvkbblAJm5Fbxa+D0vvlHJ01s/Y112Ies2F7DplSIyd5aQk1tJ+rZC0tJzkWprNXQ2n0ddpaWk/ByqKg3nW3spq2jg2c3vkLnrU/bsryTvk3rSdqjY8PIRntlaSEpWAXsOVKI+ruFgaR2pmft5Ifs9pMrmPtR1P/PliTZU1S2oTrZR1XiV/NJa1q7fzfrdxWxSN5BRcIInXlfxeM4R1mQfYu32Ih7LOUxGXjm5Zd+S8v4xnsrah2SwPsBofsD4zDz6GQvGaTPG2wsM/DHOhabLtPbqaLr+N9rRWS5dM9HYM0Zj1xCN3SM09YzSJM6WgUnadCZauwaQHLJCOAGReJxoLCaMMIlYFEjyIYJB/i8k7jtYttnwuF2QSJB4+LCysvIoKGkl/bF4gkhMMCqSR6M4/3Hh9njFPYZtaYlluwOpo1+H5nIP2h97+G3MxOjoVfoGtUzob/Luh+doKj2L4XQzU/pJ7lnu0tXRiHl2isTCArLbSjSwiOK3EXZbxLmEVKGtRV1yiKKvP6e9/xqDwyfp7N2HbmyKNU++zVcffIG161f0QzqGDX9SW63CMDG8WnGyyiQUOYSiKKLBONLc3F1mjZPcvmVkwWblL+MQM7dusLhoY2L8OqZpA16/D4fDjtlqwWo1Ew6FBAN4fT4CgSBycg6yLD5cQUo6gmFZZIgK7YNCSx8hX4iICPgv/P4ALreHUEgWWsYJhRW8Xh8eQV8ghM8XQIlEkWQ5yM1JHSND/TiWnYyOT9Gsv4dZieAXgi/dWWBF9Dc50keXtgbrxE9CKzsul3u1gEdDEwNVIhEkf8DDrGmCmSk9tvn7dF4ZpN1kYV4Ey6I1u2VJaBTFNj2E+cZ3eBz9KGEndvMdvGIz4mLV7PNzOJ3O1QT/AlQnNRjQIXUqAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2\"\n        title=\"2\"\n        src=\"/static/2781416934d1aa63d389ad5a7c7f9f1f/fcda8/2.png\"\n        srcset=\"/static/2781416934d1aa63d389ad5a7c7f9f1f/12f09/2.png 148w,\n/static/2781416934d1aa63d389ad5a7c7f9f1f/e4a3f/2.png 295w,\n/static/2781416934d1aa63d389ad5a7c7f9f1f/fcda8/2.png 590w,\n/static/2781416934d1aa63d389ad5a7c7f9f1f/efc66/2.png 885w,\n/static/2781416934d1aa63d389ad5a7c7f9f1f/23266/2.png 923w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n于是就以该页面为基础，设置网络爬虫的爬取</p>\n<p>爬虫部分的代码在文件夹 <code class=\"language-text\">代码/code</code> 中，每一个spider开头的py文件是一部分网站信息的爬取，可以在linux下使用命令运行爬虫</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">scrapy runspider --nolog &quot;这个文件夹里的某个spider开头的py文件.py&quot;</code></pre></div>\n</li>\n<li>\n<p>相关工具</p>\n<ul>\n<li>在腾讯云服务器上运行爬虫爬取数据，后续操作也在服务器上完成</li>\n<li>Scrapy是一个比较著名的Python网络爬虫框架，使用scrapy框架进行bilibili用户相关数据的爬取</li>\n<li>使用mysql作为数据库存储爬取到的相关数据</li>\n</ul>\n</li>\n</ul>\n<h2>2. 数据清洗</h2>\n<p>上一步爬到了许多数据，需要对数据进行一些处理。还有在上一步得到的数据都是分散的，比如用户信息和视频信息。</p>\n<p>这一步耗时较多，但是都是一些琐碎的事情。比如，是因为B站的历史遗留问题，有些项的默认值有好多种；有些只能是为正的值，可能是因为B站版本更换的原因，部分用户成为了负数等等</p>\n<ul>\n<li>\n<p>大致结果统计</p>\n<ul>\n<li>总爬到的用户数量\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 418px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4fd65a154106ad2320847ce99d9cd36d/d7398/3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 28.37837837837838%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABcRAAAPiAF4kDCkAAAA4klEQVQY05XQXW+CMBQG4DZMaz9sgWUSUZmZN+I+kpmJIrgM4g3//we9HrgwWaLLuDg5PW365mmZlBJBEMA5hzAMu7VSikrjZbWCGHhgjP2/RlLhdZMiXa+RphskyeJ66IeP8DjrF9gKLelaobMWxhhY6lobPC+XGPYVmrFFVf0gz3N8brf4yvY41xWiyRMCEg48fvcy57yrX/tCCEh6dttbmSKx0hpDmidRhIc/Am//oRjhQLpTUVDgGMfyG1PSzRcJmqbBx/tbpzgWJeazGNn+gLLI4XwfdV0j2+0Qx9Nr4AVo5IprzrPENAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"3\"\n        title=\"3\"\n        src=\"/static/4fd65a154106ad2320847ce99d9cd36d/d7398/3.png\"\n        srcset=\"/static/4fd65a154106ad2320847ce99d9cd36d/12f09/3.png 148w,\n/static/4fd65a154106ad2320847ce99d9cd36d/e4a3f/3.png 295w,\n/static/4fd65a154106ad2320847ce99d9cd36d/d7398/3.png 418w\"\n        sizes=\"(max-width: 418px) 100vw, 418px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></li>\n<li>清洗后用户数量\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 448px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/369f966afc5f11de09517e976b05efce/33b38/4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.83783783783784%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABB0AAAQdAFKfdo/AAABCElEQVQoz6VSW3KDMAx0eFMMGPM0gZYGBiiUME3vf7atTC6QoR87sizPSto16/sbhmFAHMdY129M04SmadFca6zLQvmMoizBeYC2bbFtG8qqwkK1siigVI39viFJEjDGwAQRSUoCzpFlGVR9RZZKWJZFjwR4GMJxHJimeUQhBHzfRxRFCKmmo27mue6TMJES4zhi6HtU1Pkt4HAd61k8g4AISlopJWJOUwqZIgqD84QXw8Tv40H4wRfpImh9z7HPE2pt9HSSEGs9ohgh/8eEinS7fXaHg5VSuO87NUiQ5znmecZH16GnX/DeNmSM8Qopg+d5sG37cFafDeNCMOCSc/peu+rYr8nwB1e2s0HUHow2AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"4\"\n        title=\"4\"\n        src=\"/static/369f966afc5f11de09517e976b05efce/33b38/4.png\"\n        srcset=\"/static/369f966afc5f11de09517e976b05efce/12f09/4.png 148w,\n/static/369f966afc5f11de09517e976b05efce/e4a3f/4.png 295w,\n/static/369f966afc5f11de09517e976b05efce/33b38/4.png 448w\"\n        sizes=\"(max-width: 448px) 100vw, 448px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></li>\n<li>在这260万用户中，设置了用户头像的有120万\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 440px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5d965b907f45edacafca1bfc3cdf3434/48c0e/5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.189189189189186%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABDqAAAQ6gGC0wqYAAABBklEQVQoz51S2Y6DMAwkqBy7KoQj5ADCVQT//4VT46oVfah21YeRhSeasRkHWhsYo5GmKfrew1qHqqqQZRnatkXXdfRdE59Aaw3f9yiKgvt1XfP7rnUQQiAIAgQ9Ec5aErhiud2wbTsbZHmOZZ5JtMOVxOM4gpQFlmVmw23fMY4jhmFkk5eglBLeeyI8mqYhIYk4ih7kNzDGYKZJLFUpcxTk/vuTMvlyPeHZO1chTm+ECGm6Afu+8RqahNMk+Sj4Jy6XCOu6Yp4mTARFaydx/P3KR1JK1SjLEpLSO6YsqR49aw31K7ScaIUw/MfEOaWplOLkDkHnHJ/Q4yQMn491xymV7//qA+52ybQiyRg0/AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"5\"\n        title=\"5\"\n        src=\"/static/5d965b907f45edacafca1bfc3cdf3434/48c0e/5.png\"\n        srcset=\"/static/5d965b907f45edacafca1bfc3cdf3434/12f09/5.png 148w,\n/static/5d965b907f45edacafca1bfc3cdf3434/e4a3f/5.png 295w,\n/static/5d965b907f45edacafca1bfc3cdf3434/48c0e/5.png 440w\"\n        sizes=\"(max-width: 440px) 100vw, 440px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></li>\n<li>这些用户相关的标签数量\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 445px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7e8be86be08d29b5d2f14785929a182e/e66bf/6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.16216216216216%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA85AAAPOQE6gPqvAAAA+ElEQVQoz52Ry26EMAxFeUkMgyA88oIADSBGggUL/v/fbuNMNVWldtFZWI7i5PjaN5jtjNlacM5RVRXWZcU4DiiKAlp3sB8WXdehLEs0TQ07z5BCYJpGcMGxLAuGYUAYhgiCAMG+H+7CoGTMA6m4bRvyPHeABsJ9JniaprjdUt+Y4FJJtG2Lvu/Raf0NzO4ZemPw2B4w5qksy7Jn8Z3Qjl7XtVdCmZUMQkrEcfwekNTQaNd14TxPrOvqVb5G+G/QLgjKvnZIZ1KYJMmPh1EU+fxq9FdDWvLsnCNjyE3j9rnvu4MzSKlwHAeUUt7NaZoguAAZqbX6FfgJzXGgKOop7/4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"6\"\n        title=\"6\"\n        src=\"/static/7e8be86be08d29b5d2f14785929a182e/e66bf/6.png\"\n        srcset=\"/static/7e8be86be08d29b5d2f14785929a182e/12f09/6.png 148w,\n/static/7e8be86be08d29b5d2f14785929a182e/e4a3f/6.png 295w,\n/static/7e8be86be08d29b5d2f14785929a182e/e66bf/6.png 445w\"\n        sizes=\"(max-width: 445px) 100vw, 445px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></li>\n<li>和用户相关的用户数量，表名叫<code class=\"language-text\">submit_videos</code>是一个”历史遗留”问题，第一个爬虫爬的时候这么用了，后面就懒得改了，其实里面包括了用户相关的收藏夹视频、投币视频和上传视频信息\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8d5486fd44317b825f29b8a0ceed93b2/0b533/7.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.78378378378378%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABGIAAARiAE3kcxvAAAA5ElEQVQoz6VR0W6DMAyEAUEkAUIhSTvBykRKGJPW//+6m80e+rp1D5adODmf75J1jTBtg3GasN4CLpdXeO+xxYh5ntE2Dfq+R6Sz92fs+47P/QPGGCwh4H7/wpneJ0nyE86548MwDLDWous65HkOrTSEEHhJU2RZBqUUyrI8spTyyFVVQWtN9+IBeH27IoQbAfao6xpSyUfzmbDWYVkWvNN6jhjyZG6kxOwpwIY0YsBtizidOhRC/I/hOI6HCbwuA3NtSMeJTOKa+0VR/IVhDWYpSeCW3GYjWGx2kYewSWzKbwG/AcCMnCuRflpNAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"7\"\n        title=\"7\"\n        src=\"/static/8d5486fd44317b825f29b8a0ceed93b2/0b533/7.png\"\n        srcset=\"/static/8d5486fd44317b825f29b8a0ceed93b2/12f09/7.png 148w,\n/static/8d5486fd44317b825f29b8a0ceed93b2/e4a3f/7.png 295w,\n/static/8d5486fd44317b825f29b8a0ceed93b2/0b533/7.png 500w\"\n        sizes=\"(max-width: 500px) 100vw, 500px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></li>\n</ul>\n<p>这一步的代码还是在文件夹<code class=\"language-text\">代码/code</code>中，不已spider开头的应该都是，可以在Linux下直接使用如下命令运行</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">python &quot;这个文件夹里的某个py文件.py&quot;</code></pre></div>\n</li>\n<li>\n<p>相关工具</p>\n<ul>\n<li>继续在腾讯云服务器上完成操作</li>\n<li>使用python进行相关的操作</li>\n<li>使用redis存一些值非常方便，尤其是一边写一遍调试的时候</li>\n<li>使用mysql作为数据库存储爬取到的相关数据</li>\n</ul>\n</li>\n</ul>\n<h2>3. 数据分析与挖掘</h2>\n<p>首先对这些信息进行一些大致的观察，可以得到一些有趣的信息。比如在这些用户中选取注册时间最早的10万名用户，从他们喜爱的视频种类进行统计分析，发现最火的不是B站代表鬼畜类视频和动画类视频，而是日剧和搞笑集锦类视频；</p>\n<p>在这260万名用户中，上传了头像的有120万。头像是纯白色或者纯黑色头像的用户最多，加起来有上千名用户，比其他完全重合头像的群体都要多。把系统默认头像截图然后作为头像的人第二多，加起来有上百名用户。</p>\n<p>我使用了一个网站来展示结果</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">http://data.honoumi.com</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0c13af74c0eaf5644820e03bea5eeec0/9e818/8.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 49.32432432432432%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABabAAAWmwET1NXDAAABXklEQVQoz32Q2W7CMBBF89EUQopQadWf6a/0oQ8VS1hDWRKMQzYniCXcehwcBUQ70pHHM3euJzHanVd03t5BZ6v9AqvVRsNqod58Rq1hom5a5b1hSZoFT2YTtbqpNFWMME5A8F2AxWoNj20xXyxl7kKkKTbyPnXmWK5dOD8LpZkvV0ofixRRIm4wtv5ONd0NQ98eYjJz8N3tKXojmfdtdPsDTKRpd2DDHo0xHE+xcj1wOcu4D/LQGFTQrL2NgvIwCvHx6eJrxiGSGDwIsQsj+NeTltAmVQ9DpBmIRK4fSGEUx9KsIIiK31Hk1EtKndZQTXsQBq5xPB7heZ7ClZ/DGIMQAqHciMn/6Ps+YvnY+XwG57wkyzJUw7hcLiohITUPh4MyP51OspZjv98jz3OlIS3l1NNzuq4pDUlIZmRcNaBhuleH6MH7mtbfGOrN9AaPtqjGQ0Od/BX/Gd3XKH4BooDmMzVEgxoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"8\"\n        title=\"8\"\n        src=\"/static/0c13af74c0eaf5644820e03bea5eeec0/fcda8/8.png\"\n        srcset=\"/static/0c13af74c0eaf5644820e03bea5eeec0/12f09/8.png 148w,\n/static/0c13af74c0eaf5644820e03bea5eeec0/e4a3f/8.png 295w,\n/static/0c13af74c0eaf5644820e03bea5eeec0/fcda8/8.png 590w,\n/static/0c13af74c0eaf5644820e03bea5eeec0/efc66/8.png 885w,\n/static/0c13af74c0eaf5644820e03bea5eeec0/c83ae/8.png 1180w,\n/static/0c13af74c0eaf5644820e03bea5eeec0/9e818/8.png 1913w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n上面爬到的数据也可以在这上面查看和下载</p>\n<p>这部分的代码分布比较广，首先是整个网站的代码，包括网站后端与前端，在文件夹 <code class=\"language-text\">代码/django</code> 中，后端运算的具体逻辑都在上面这个文件夹里的<code class=\"language-text\">bili</code>这个文件夹中\nFP-growth 是直接预处理过的，所以没和网站代码放在一起，在文件夹 <code class=\"language-text\">代码/code/fp_Growth</code> 中</p>\n<p>可以上传一张头像图片\n比如\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bc38436f6933a80f23a9b6d921af1187/1f6b7/9.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.64864864864865%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABJ0AAASdAHeZh94AAABkklEQVQoz52RWUvDQBSF88PVWtGi6K9RHwTxxVqXYkFRklas2CXN1iyTfWuOd6atNMUnLxxmvR9zzkgnp2donZzisHWMg6MWdveb2GnsY2dvpcZazaVqe3Xt0rkURDFcxjCd6TBMC8z3EUQR4jRFlCQIwpAU0X4gxM/4OoyTPyVZtoOZbkDuDzCaTOF6DLbjUFOMJM0JkNJIIniWl1hUgBcmUKmH95pzuyZJTOhAnWmwaO56LtK0QB68QR9OcHv9AWPuwnMdKPIrBooMRekL2J/AkCz4QQjH88gSA2MOAXMAFlTNwlX7A2PVwGQ8wl37Bk8Pj+h2e8K+x3xhX8SwkkSdyPMcumFA1zVomgrDMPHc7uG+08HF5Tll7KMoCmyWpusIKd/tEsCyLOlVKWLKae6QbdeD8i7jcyDjS3nBYrHA8l6BiuYcznt4VVVVkwDyhizLENMvuWTdtu2VfV+8zrRMyneOwfAb36MJudAIWv5CNsG/QG57CY3Fj/JxLb7mYgHlTTZjymoTVAOuN/5T21BeP0o4467edWLxAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"9\"\n        title=\"9\"\n        src=\"/static/bc38436f6933a80f23a9b6d921af1187/fcda8/9.png\"\n        srcset=\"/static/bc38436f6933a80f23a9b6d921af1187/12f09/9.png 148w,\n/static/bc38436f6933a80f23a9b6d921af1187/e4a3f/9.png 295w,\n/static/bc38436f6933a80f23a9b6d921af1187/fcda8/9.png 590w,\n/static/bc38436f6933a80f23a9b6d921af1187/efc66/9.png 885w,\n/static/bc38436f6933a80f23a9b6d921af1187/c83ae/9.png 1180w,\n/static/bc38436f6933a80f23a9b6d921af1187/1f6b7/9.png 1909w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n因为我没怎么优化代码，所以后台算的比较慢，需要等大概几十秒\n返回结果\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2f7252021105163e914da466f1f2b858/7970d/10.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 49.32432432432432%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABJ0AAASdAHeZh94AAAA20lEQVQoz6VSiw6CMAzkq1UwKArRv8UExmPAONdpR9GRmLjksrW5Xa/dokteoLjdkV1zpKcMx/SMfXzE7hBbJPacuF0ilGNEEMtMBtM04Z8VzfMMAgkppTAMgztTbhxHVFUFrTWMMZ7XNI2PaZdwgs6dDdq2hXnHTK5tkaquoW0h5tU25k7YEMMLEqF8lBg/iOSSHLIACSr1csi8r5aZ2Pf9ikQ5ak/OlXk/CXZdtyJsFZHtBh9laUX5yiE3MrclGniU5TJdYkHJo7nKOYcF7R+k4cuqW4LUyZbDJ8/F+W5i0lZiAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"10\"\n        title=\"10\"\n        src=\"/static/2f7252021105163e914da466f1f2b858/fcda8/10.png\"\n        srcset=\"/static/2f7252021105163e914da466f1f2b858/12f09/10.png 148w,\n/static/2f7252021105163e914da466f1f2b858/e4a3f/10.png 295w,\n/static/2f7252021105163e914da466f1f2b858/fcda8/10.png 590w,\n/static/2f7252021105163e914da466f1f2b858/efc66/10.png 885w,\n/static/2f7252021105163e914da466f1f2b858/c83ae/10.png 1180w,\n/static/2f7252021105163e914da466f1f2b858/7970d/10.png 1908w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>也可以查看fp-growth结果\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d42c0b34094f7c6be8ef90891fac0423/7ca1f/11.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 49.32432432432432%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABJ0AAASdAHeZh94AAAAvUlEQVQoz6VQbQ+CIBjkdzczM1/qpypOp0tAQC5yavjBbPRstxuM57g7kt0fyC2SLEd8SxEnKcLoiiC8OIgmPgXnQxDMI4QArSoURQFKKZqmQVmWE9d1jbbt8MuQ0RgYC6UU+v6JruvAGAPn3J4X7sEsj+N4CGJmwcklH6CV3v19efsNG8FhkNBa7y6797uRN4Li7VCtiz6zEeRcQEn5EfQQJWsUCyXVVOwazcehG48zDmlj/+3Q7dAV9OnxBWHb+rfsOcIUAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"11\"\n        title=\"11\"\n        src=\"/static/d42c0b34094f7c6be8ef90891fac0423/fcda8/11.png\"\n        srcset=\"/static/d42c0b34094f7c6be8ef90891fac0423/12f09/11.png 148w,\n/static/d42c0b34094f7c6be8ef90891fac0423/e4a3f/11.png 295w,\n/static/d42c0b34094f7c6be8ef90891fac0423/fcda8/11.png 590w,\n/static/d42c0b34094f7c6be8ef90891fac0423/efc66/11.png 885w,\n/static/d42c0b34094f7c6be8ef90891fac0423/c83ae/11.png 1180w,\n/static/d42c0b34094f7c6be8ef90891fac0423/7ca1f/11.png 1890w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>也可以下载我用爬虫爬到的数据集，不过点击的时候要小心流量，总大小有2-3个G左右</p>\n<ul>\n<li>\n<p>相关工具</p>\n<ul>\n<li>\n<p>python</p>\n<ul>\n<li>django，一个python的后端框架</li>\n<li>numpy，一个python的数学库</li>\n<li>python imaging library，一个python的图像处理库</li>\n</ul>\n</li>\n<li>mysql，用来存数据的数据库</li>\n<li>腾讯云，从第一步开始就一直在腾讯云上运行代码</li>\n<li>github，用了github的静态网页托管服务</li>\n<li>bootstrap，一个前端框架</li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"bilibili 用户数据挖掘与分析","date":"June 04, 2016","description":"用户可以用本地的截图缩略图来搜索相对应的视频播放位置。服务器端可以使用云平台的服务来处理与存储图像哈希与截图缩略图。","tags":["Python","Data mining","Web crawler","Scrapy","Javascript","HTML","MySQL","Django","数据挖掘"]}}},"pageContext":{"slug":"/blogs/bilibili-data-mining/","previous":{"fields":{"slug":"/blogs/ucore_lab_7/"},"frontmatter":{"title":"Operating System (7) : 同步互斥"}},"next":{"fields":{"slug":"/blogs/ucore_lab_8/"},"frontmatter":{"title":"Operating System (8) : 文件系统"}}}}}