<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:131.25%/1.5 'Crimson Text',serif;box-sizing:border-box;overflow-y:scroll;scroll-behavior:smooth;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.73);font-family:'Crimson Text',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;color:hsla(0,0%,0%,0.9);font-family:'Rosario',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;color:hsla(0,0%,0%,0.9);font-family:'Rosario',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;color:hsla(0,0%,0%,0.9);font-family:'Rosario',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;color:hsla(0,0%,0%,0.9);font-family:'Rosario',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;color:hsla(0,0%,0%,0.9);font-family:'Rosario',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;color:hsla(0,0%,0%,0.9);font-family:'Rosario',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}ul{margin-left:1.5rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.5rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;font-size:0.85rem;line-height:1.5rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;font-size:1rem;line-height:1.5rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}blockquote{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:1.21875rem;padding-right:0;padding-top:0;margin-bottom:1.5rem;font-size:1.1487rem;line-height:1.5rem;border-left:0.28125rem solid #ff5700;color:hsla(0,0%,0%,0.59);font-style:italic;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.5rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}b{font-weight:600;}strong{font-weight:600;}dt{font-weight:600;}th{font-weight:600;}li{margin-bottom:calc(1.5rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.5rem;margin-bottom:calc(1.5rem / 2);margin-top:calc(1.5rem / 2);}li > ul{margin-left:1.5rem;margin-bottom:calc(1.5rem / 2);margin-top:calc(1.5rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.5rem / 2);}code{font-size:0.85rem;line-height:1.5rem;}kbd{font-size:0.85rem;line-height:1.5rem;}samp{font-size:0.85rem;line-height:1.5rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1rem;padding-right:1rem;padding-top:0.75rem;padding-bottom:calc(0.75rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}a{color:#ff5700;text-decoration:none;text-shadow:.03em 0 #fff,-.03em 0 #fff,0 .03em #fff,0 -.03em #fff,.06em 0 #fff,-.06em 0 #fff,.09em 0 #fff,-.09em 0 #fff,.12em 0 #fff,-.12em 0 #fff,.15em 0 #fff,-.15em 0 #fff;background-image:linear-gradient(to top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0) 1px, #ff5700 1px, #ff5700 2px, rgba(0, 0, 0, 0) 2px);}a:hover,a:active{text-shadow:none;background-image:none;}h1,h2,h3,h4,h5,h6{margin-top:2.25rem;margin-bottom:0.75rem;}ul,ol{margin-left:1rem;}li>ol,li>ul{margin-left:1rem;margin-bottom:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.5rem;color:hsla(0,0%,0%,0.73);font-style:normal;font-weight:400;}blockquote cite:before{content:"— ";}@media only screen and (max-width:480px){html{font-size:118.75%;line-height:29.85px;}blockquote{border-left:0.28125rem solid #ff5700;color:hsla(0,0%,0%,0.59);padding-left:0.84375rem;font-style:italic;margin-left:-1.125rem;margin-right:0;}}h1 > a{background-image:none;}</style><style data-href="/styles.2eb406826dd04e80762a.css">@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/static/montserrat-latin-100-191cc9f50f3b76b9617cb383f19acb7d.woff2) format("woff2"),url(/static/montserrat-latin-100-370318464551d5f25b0f0a78f374faac.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/static/montserrat-latin-100italic-bdeaeb79db315697bd173a55b097dc18.woff2) format("woff2"),url(/static/montserrat-latin-100italic-ecf7d49386e8f265878e735db34a7c4b.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/static/montserrat-latin-200-85d5ef9db7f2dc6979172a4a3b2c57cb.woff2) format("woff2"),url(/static/montserrat-latin-200-1fc98e126a3d152549240e6244d7e669.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/static/montserrat-latin-200italic-49095760a498d024fe1a85a078850df9.woff2) format("woff2"),url(/static/montserrat-latin-200italic-fe46cf8b9462c820457d3bf537e4057f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/static/montserrat-latin-300-7c3daf12b706645b5d3710f863a4da04.woff2) format("woff2"),url(/static/montserrat-latin-300-8dc95fab9cf98d02ca8d76e97d3dff60.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/static/montserrat-latin-300italic-f20b178ca2024a5eac8e42e6649db86c.woff2) format("woff2"),url(/static/montserrat-latin-300italic-3fe16939288856e8e828fa2661bf2354.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/static/montserrat-latin-400-bc3aa95dca08f5fee5291e34959c27bc.woff2) format("woff2"),url(/static/montserrat-latin-400-8102c4838f9e3d08dad644290a9cb701.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/static/montserrat-latin-400italic-5cad650422a7184467af5a4d17b264c4.woff2) format("woff2"),url(/static/montserrat-latin-400italic-d191f22af3bb50902b99ac577f81a322.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/static/montserrat-latin-500-92d16e458625f4d2c8940f6bdca0ff09.woff2) format("woff2"),url(/static/montserrat-latin-500-8b763220218ffc11c57c84ddb80e7b26.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/static/montserrat-latin-500italic-47bfcca6b69d6a9acca7a8bff17193e2.woff2) format("woff2"),url(/static/montserrat-latin-500italic-72c01f753c3940c0b9cb6bf2389caddf.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/static/montserrat-latin-600-6fb1b5623e528e27c18658fecf5ee0ee.woff2) format("woff2"),url(/static/montserrat-latin-600-7c839d15a6f54e7025ba8c0c4b333e8f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/static/montserrat-latin-600italic-60789af1c9338ed1a9546722ec54b4f7.woff2) format("woff2"),url(/static/montserrat-latin-600italic-f3d4de8d0afb19e777c79032ce828e3d.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/static/montserrat-latin-700-39d93cf678c740f9f6b2b1cfde34bee3.woff2) format("woff2"),url(/static/montserrat-latin-700-80f10bd382f0df1cd650fec59f3c9394.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/static/montserrat-latin-700italic-ba136d97b14e82284dd595e257f11c47.woff2) format("woff2"),url(/static/montserrat-latin-700italic-8c98142b425630821139c24bd1698700.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/static/montserrat-latin-800-b7018be9ed6cd94da8b6675b3a468c3b.woff2) format("woff2"),url(/static/montserrat-latin-800-9a9befcf50d64f9d2d19d8b1d1984add.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/static/montserrat-latin-800italic-540ffdd223d1a9ad3d4e678e1a23372e.woff2) format("woff2"),url(/static/montserrat-latin-800italic-897086f99f4e1f45e6b1e9368527d0bc.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/static/montserrat-latin-900-58cd789700850375b834e8b6776002eb.woff2) format("woff2"),url(/static/montserrat-latin-900-26d42c9428780e545a540bbb50c84bce.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/static/montserrat-latin-900italic-451157bc8861fe54f523b3669a3def71.woff2) format("woff2"),url(/static/montserrat-latin-900italic-a8ec4957e1c24f5793305763ad9845b3.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/static/merriweather-latin-300-b1158cfcd4aacb9d8fb61625e37af46a.woff2) format("woff2"),url(/static/merriweather-latin-300-cc7de05e166e90320d7d896e0f72a19d.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/static/merriweather-latin-300italic-8fe52a48089d6ebe46db0b8e7cc66263.woff2) format("woff2"),url(/static/merriweather-latin-300italic-e1331f5397c2a673f9d3765138debdb5.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/static/merriweather-latin-400-8276fdb72ae8f4714d4e6eba704cc39f.woff2) format("woff2"),url(/static/merriweather-latin-400-69f09800f4f6479d06e44eba837df872.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/static/merriweather-latin-400italic-3a9be9ea9f7aa4af6de7307df21d9fc0.woff2) format("woff2"),url(/static/merriweather-latin-400italic-d76079ed7541a433a54f79316de086e9.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/static/merriweather-latin-700-fa534be7ffa380e39a7f6e03bf9a5e03.woff2) format("woff2"),url(/static/merriweather-latin-700-ba56ea84b8084b7ff9677f50d3cd81bd.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/static/merriweather-latin-700italic-1ef5edaaa20ae53ea50399884c5e48c6.woff2) format("woff2"),url(/static/merriweather-latin-700italic-534bc9e7ce93c73d73426e46acd78092.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/static/merriweather-latin-900-7528fb70e8a4a82c7305e72ff43ac25f.woff2) format("woff2"),url(/static/merriweather-latin-900-3799b6e2f5ed3fcccf9d7a708d7419fa.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/static/merriweather-latin-900italic-e1b4d2aaa78e12ad84aaf8a56321e4c2.woff2) format("woff2"),url(/static/merriweather-latin-900italic-2ae22f731b3424e8dbb4b37f7ca6e708.woff) format("woff")}code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.bm-item{display:inline-block;text-decoration:none;margin-bottom:10px;color:#d1d1d1;transition:color .2s;text-shadow:none}.bm-item:hover{color:#fff}.bm-burger-button{position:fixed;width:36px;height:30px;right:36px;top:36px}.bm-burger-bars{background:#373a47}.bm-cross-button{height:24px;width:24px}.bm-cross{background:#bdc3c7}.bm-menu{background:#000;padding:2.5em 1.5em 0;font-size:1.15em}.bm-morph-shape{fill:#000}.bm-item-list{color:#b8b7ad}.bm-overlay{background:rgba(0,0,0,.3)}.bm-item{background-image:none}.bm-menu-background-div{position:fixed;width:80px;height:75px;right:0;top:0;background:#fff}h3>a:hover,li>a:hover{padding:10px 2px}.blog-post-module--blog-tag--2JghA{margin:.625rem .3125rem;height:2.1875rem;padding:0 1.5rem;line-height:2.1875rem;font-size:.9rem}.blog-post-module--blog-tag--2JghA,.blog-post-module--blog-tag-small-size--3s4nT{display:inline-block;border:1px solid #e6e6e6;text-decoration:none;border-radius:1.25rem;color:#222}.blog-post-module--blog-tag-small-size--3s4nT{margin:0 .3125rem;height:1.15rem;line-height:1rem;padding:0 .7rem;font-size:.8rem;white-space:nowrap}.blog-post-module--blog-tag--2JghA:hover,.blog-post-module--blog-tag-small-size--3s4nT:hover{color:#fff;background-color:grey;border:1px solid grey}</style><meta name="generator" content="Gatsby 2.23.12"/><link rel="icon" href="/favicon-32x32.png?v=9f50719bf6a5c0099a47921ead3762b3"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=9f50719bf6a5c0099a47921ead3762b3"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=9f50719bf6a5c0099a47921ead3762b3"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=9f50719bf6a5c0099a47921ead3762b3"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=9f50719bf6a5c0099a47921ead3762b3"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=9f50719bf6a5c0099a47921ead3762b3"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=9f50719bf6a5c0099a47921ead3762b3"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=9f50719bf6a5c0099a47921ead3762b3"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=9f50719bf6a5c0099a47921ead3762b3"/><title data-react-helmet="true">IDCT图像压缩，Peak signal-to-noise ratio 实验 | Twistronics Blog</title><meta data-react-helmet="true" name="description" content="利用PSNR值，对图像压缩算法进行观察。"/><meta data-react-helmet="true" property="og:title" content="IDCT图像压缩，Peak signal-to-noise ratio 实验"/><meta data-react-helmet="true" property="og:description" content="利用PSNR值，对图像压缩算法进行观察。"/><meta data-react-helmet="true" property="og:type" content="website"/><link href="//fonts.googleapis.com/css?family=Rosario:700|Crimson+Text:400,400i,600" rel="stylesheet" type="text/css"/><link as="script" rel="preload" href="/webpack-runtime-142e5cd5704972e4dd70.js"/><link as="script" rel="preload" href="/framework-f600a0dcdbbe2ab3be17.js"/><link as="script" rel="preload" href="/app-132e7336ce43746dfb98.js"/><link as="script" rel="preload" href="/styles-89fd2ae28bdf06750a71.js"/><link as="script" rel="preload" href="/777cf710-733fd732338655e18562.js"/><link as="script" rel="preload" href="/5d21eb57d7fc5176899f741e4bf094d3642ad4b0-0c04ee828cb752ae0b77.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-c59b2b29c6b2ad001b4f.js"/><link as="fetch" rel="preload" href="/page-data\blogs\Peak-signal-to-noise-ratio\page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data\app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><div class="bm-menu-background-div"><div><div class="bm-overlay" style="position:fixed;z-index:1000;width:100%;height:100%;background:rgba(0, 0, 0, 0.3);opacity:0;-moz-transform:translate3d(100%, 0, 0);-ms-transform:translate3d(100%, 0, 0);-o-transform:translate3d(100%, 0, 0);-webkit-transform:translate3d(100%, 0, 0);transform:translate3d(100%, 0, 0);transition:opacity 0.3s, transform 0s 0.3s"></div><div id="" class="bm-menu-wrap" style="position:fixed;right:0;z-index:1100;width:300px;height:100%;-moz-transform:translate3d(100%, 0, 0);-ms-transform:translate3d(100%, 0, 0);-o-transform:translate3d(100%, 0, 0);-webkit-transform:translate3d(100%, 0, 0);transform:translate3d(100%, 0, 0);transition:all 0.3s"><div class="bm-morph-shape" style="position:absolute;width:120px;height:100%;right:inherit;left:0;-moz-transform:rotateY(180deg);-ms-transform:rotateY(180deg);-o-transform:rotateY(180deg);-webkit-transform:rotateY(180deg);transform:rotateY(180deg)"><svg width="100%" height="100%" viewBox="0 0 100 800" preserveAspectRatio="none"><path d="M-1,0h101c0,0-97.833,153.603-97.833,396.167C2.167,627.579,100,800,100,800H-1V0z"></path></svg></div><div class="bm-menu" style="height:100%;box-sizing:border-box;overflow:visible;position:fixed;right:0;width:180px;white-space:nowrap"><nav class="bm-item-list" style="height:100%;position:relative;left:-110px;width:170%;overflow:auto"><a href="/" style="display:none" class="bm-item" tabindex="-1">Home</a><a href="/" class="bm-item" style="display:block" tabindex="-1">Home</a><a href="/all-tags" class="bm-item" style="display:block" tabindex="-1">All tags</a></nav></div><div><div class="bm-cross-button" style="position:absolute;width:24px;height:24px;right:8px;top:8px"><span style="position:absolute;top:6px;right:14px"><span class="bm-cross" style="position:absolute;width:3px;height:14px;transform:rotate(45deg)"></span><span class="bm-cross" style="position:absolute;width:3px;height:14px;transform:rotate(-45deg)"></span></span><button style="position:absolute;left:0;top:0;width:100%;height:100%;margin:0;padding:0;border:none;font-size:0;background:transparent;cursor:pointer" tabindex="-1">Close Menu</button></div></div></div><div><div class="bm-burger-button" style="z-index:1000"><span><span class="bm-burger-bars" style="position:absolute;height:20%;left:0;right:0;top:0%;opacity:1"></span><span class="bm-burger-bars" style="position:absolute;height:20%;left:0;right:0;top:40%;opacity:1"></span><span class="bm-burger-bars" style="position:absolute;height:20%;left:0;right:0;top:80%;opacity:1"></span></span><button style="position:absolute;left:0;top:0;width:100%;height:100%;margin:0;padding:0;border:none;font-size:0;background:transparent;cursor:pointer">Open Menu</button></div></div></div></div><div style="margin-left:auto;margin-right:auto;max-width:46.5rem;padding:2.25rem 1.125rem"><header><h3 style="font-family:Montserrat, sans-serif;margin-top:0"><a style="box-shadow:none" href="/">Twistronics Blog</a></h3></header><main><article><header><h1 style="margin-top:1.5rem;margin-bottom:0">IDCT图像压缩，Peak signal-to-noise ratio 实验</h1><p style="font-size:0.87055rem;line-height:1.5rem;display:block;margin-bottom:1.2rem">April 18, 2016</p><div><ul style="padding:0;margin:0 -.625rem;margin-bottom:1.5rem"><a style="background-image:none" href="/tag/Python"><li class="blog-post-module--blog-tag--2JghA">Python</li></a><a style="background-image:none" href="/tag/Digital image processing"><li class="blog-post-module--blog-tag--2JghA">Digital image processing</li></a><a style="background-image:none" href="/tag/Algorithm"><li class="blog-post-module--blog-tag--2JghA">Algorithm</li></a></ul></div></header><section><p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 512px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/814a0034f5549e957ee61360d87457e5/01e7c/lena.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsSAAALEgHS3X78AAAEz0lEQVQ4ywHEBDv7AN+BbuiOccJcXaxCUcJXWM5iX9BkYNFkYc1hX89jX85lYshfYL1ZXtyAb+CBauKNct6ff7ZUWshiYZxEUwDliG/qjG7AV1atQU3DVVbOXlzRX2DRYWLMZ2XKamjLW13OW1u/VV3VdG/ih3HadmfnoX7ViXWUOE5cFj8A2nVj5H1kv1dWpzxMwlJWzltayV1gwWdvyYmI1ayd05mRw19kuklV1W5q3nht23Jk5IBsv31wVxA9YBk/ALBFTuB7Zr5WVqQ8Tr5QVsdWV7tUW8Nlact2ddmpnePKu9i2rqtMWtluZ7RPWdhlXdBkYGkcQVkTP5xVZQCfN0rhe2m7VVikOUvBWFm+U1nAVl7IaGvQh4PcsKXeu7Hl0MLNp6TZbGSUPFDJjoubVmdRCDaKQFzWjIAArD9L439owFpYpTZHxmBbw1tcv1FczHFx2paO3aSX4K6h3bWr2bix25qN1aif69fHilZsYhQ/yn181ot9AKw+TOaFasFdWaIyRchoXtp2ZMFXYdFycs95f8qBiMR+hMmLjduqneHFtuG/s8qOimMiR6FSZtyPhM+GewCyQ07phWnAXVmiMUTDYlzchm/CWmbDYm+PQGd0M2p+QmzHlI/dtqbCkpPFeniDO1FpH0fOhH/UjoLNhX4Ar0JO44JqwV5bpTdKu05U1n1tuVNlfjFaYyJWdjBaxpWa3aic6rapsmRyi0FbWxI5kUhd1ZGD0I2B0Ih/AKs+TeGCbcJhX6Y5TchXV7xaYIA0XVsaS3ArVseKh8N7fdiBf/W7qa9hbHYsUGUdRLhwcdOQgMeGfsN9fAClOUrdgWvJZV6pOku1Ymp+O2ZsNGpXEkCtbXXLe3qjR1/VbXTOfoOELUt+NlV4L07OhHvQhnjEf3rBhH4AjytF1Xtqz2hfp0toe0N2ZixfdjRcfTtVtWds2Whu6JGM3XF25pKRqUNVdi5QmE1b1Ix+wHl3zo5667uLAIQlRNR4a89pYo86ZnhGfm0wW34yTpVYZowvSOBlaOWBfNhoaeWMiIwzTn0zUL1ybsyFesF8deu3he/MoQCEJUPcg3PRbWiGNF5uOXCKTXisanRtJ0eKLEbhYmLcZGbidXfGbXVlGkCNPVLRhnfDfXfJhXXxyZjv0KsAbxo+4IZyyGxqdCxZcUJ4nGSQjEpgXBQ7cyJBsEBN2WRn5XV4gjBPZBc7nEpZyYZ6voB6xY1/+Nio68OYAHsxUNR2acNxb2QjUnE5aodbjXxDa2QcQWMbQZk4TdVma+CKg7iFg305VJpHWL10c6ZeZ8mPe+Wzi5VEUQCSXXLQeWy8bWtZG0pnKFR1P3OVaI5mI0hvIUK0SFPdaGfdfXX1u5zUp56XTFrHgnmwaGvpsoW6aWGaOk8AfEhj1oRxuGZlWBlIXyFKaTJjhlaBaydJkzRHxlZa4Glj3XJs4JmI78m3wIB7tXBsyId38bWFrkZNmERXAItTadeKdbpoZlMURF4eSGw0YnA4ZGEVN6c/StFgYOFsZtxqY92Fdu7CsNCXkYUySL18acFxXpA2Too+VQCOWWzimYCmWV5XGEhtMV5wN2VpLFeQLj/KVlTbZF3fbWbecGfdeW3mqZnbr6aZTVm4W1mSO02ORFp+NE4AWFlxExS7wAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="lena"
        title="lena"
        src="/static/814a0034f5549e957ee61360d87457e5/01e7c/lena.png"
        srcset="/static/814a0034f5549e957ee61360d87457e5/12f09/lena.png 148w,
/static/814a0034f5549e957ee61360d87457e5/e4a3f/lena.png 295w,
/static/814a0034f5549e957ee61360d87457e5/01e7c/lena.png 512w"
        sizes="(max-width: 512px) 100vw, 512px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<ul>
<li>
<p>首先将其转为灰度图</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">gray_scale</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">gray_rgb</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> g<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>r<span class="token operator">*</span><span class="token number">299</span> <span class="token operator">+</span> g<span class="token operator">*</span><span class="token number">587</span> <span class="token operator">+</span> b<span class="token operator">*</span><span class="token number">114</span><span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">1000</span>

    gray <span class="token operator">=</span> numpy<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span>img<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>img<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dtype<span class="token operator">=</span>img<span class="token punctuation">.</span>dtype<span class="token punctuation">)</span>

    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>img<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>img<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            gray<span class="token punctuation">[</span>i<span class="token punctuation">,</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> gray_rgb<span class="token punctuation">(</span>img<span class="token punctuation">[</span>i<span class="token punctuation">,</span>j<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> img<span class="token punctuation">[</span>i<span class="token punctuation">,</span>j<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> img<span class="token punctuation">[</span>i<span class="token punctuation">,</span>j<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> gray</code></pre></div>
<p>转换效果
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 511px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/938778d475af2b66b0cb6757daa38331/92e00/gray-scale.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 104.72972972972974%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAA7CAAAOwgEVKEqAAAAD7UlEQVQ4yz2UV0sESxSE55cIPogBM+Yc17iurglxzXHXnHNOGNeAGbwKKgZQEBMiqIjok0/+n3P3O17vw9AzPd11qupUt9FZYJLyEqtUVZVKjeuprigRqyVDLOY0yc3hSdfRwmNO+28+XUdrbobO55hN+uS5vo3RoQGZnpqSuro6yc+3SmVlpdTX10tDA0+D1NXW6j++a13v5eVlMjAwIENDQzI+Nibr62tis5XqHqs1T4zFpWVxOlelurpaLBaLi2mVNDU1SUtLi7S2tkp7e7t0dnaK3W4Xu8MhNTU1MjIyIsvLyzLmAjw4+Eff8/LyxN/fX4zh4WGZmJhQwOzsbKmoKNdqDoddOjo6dPHZ2Zns7OzoXElJifT09OgemDIuLi6Kt7e3eHl5iVFYWKiVYAZgWVmZgiO9ra1NRkdH5fz8XD4/P+Xu7k4Be3t7dQ0quru7JSwsTDw8PAQsIy0tTcbHxxUwMzPzfzCkIXV+fl6ur6/l+flZvr+/lS0MWTs9Pa32uLm5SWpqqjI1cnJyZHJyUg0HvLGxUSUD2t/fL7u7u3J6eipXV1fy8PCgwPv7+y7vDuTn50eLuru7C9atrq7+As7OzmpHU1JSVMbg4KAWYBH/nE6nrKysyObmpsp/fX2V9/d3OTw8lJiYGFc68mVjY+OXodVqlbm5OWWVlJTkMt6hMmHa1dWlnuXm5grrAL6/v5ejoyNdg2e+vr6qcH19XRYWFn4BZ2ZmFADJpaWlMuXKJQUyMjIkMjJSoqOjVc7l5aUCUggwT09P9RKwtbU1TYRB9gDEXH7iHSyzsrIkICBAoqKiVAGSkfTy8qLexsfHi5+fn2b1Ty72GGykW3gHI6JCSHmHAfPIwyfisrS0JAkJCZKenq7FUMMcpMAx4uLiNIecCJvNpp7hJWwTExOlr69Ps7a1taXx2tvbk6KiIv1HYWQSbopiiREeHq7dpP0swEMWx8bGaqfpPMWQjHfb29tiNptVMieJRkDo5ORE3t7exIiIiFDthBWZeApTQACmIbwDxqlBYnBwsAaZfchk7vHxUT4+PsTAeOjiD1LpHhJpDh6GhIRoZABFGkU5s6hhHw1j/Pr60mwaMEAynYMtQf+Tz+1BJ5OTk1Ue0YAlcinCAWhublbQp6cnJWFwQgDE/MDAQKFJmA5j2AUFBUlBQYFKRh7Sjo+PFfDvLHNiKITfRnFxsXpBnmADCD+oTCxgQ2UAKUyXuXnwjUuW8fb2Vn2niMELnUKSj4+PsjSZTCqdO46cEnQY4y1rCTesWIdsjt7fHoMjRsYYAaSzZJAGhYaG6v0IeyzBZyJycXEhNzc3agXRIhmAEfZ/AWnjs9a0TkixAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="gray scale"
        title="gray scale"
        src="/static/938778d475af2b66b0cb6757daa38331/92e00/gray-scale.png"
        srcset="/static/938778d475af2b66b0cb6757daa38331/12f09/gray-scale.png 148w,
/static/938778d475af2b66b0cb6757daa38331/e4a3f/gray-scale.png 295w,
/static/938778d475af2b66b0cb6757daa38331/92e00/gray-scale.png 511w"
        sizes="(max-width: 511px) 100vw, 511px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
</li>
<li>
<p>1D-DCT
使用公式
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 586px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/cf662a1cf501555755fb8aa803622308/a76f4/1.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 19.594594594594593%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABU5AAAVYAGD5vmUAAAAqElEQVQY011QyQqFMAzs/3+eFxURlaK1xQWLSxdlJAHlPXPJwkwyE4FPnOcJrfXbW2vR9z2u6/rDreuKbdsQQmCOc457sSwLEyjv+865KAp0XYd5ntE0DaqqwjiOUEphmiau67pGkiQoyxLGGGRZxjxBlwg4DAODiZznOYNo1rYtE0n1MyM81cdxIE1TXua9ZwHia5ksxBjfnlRLKdnWb9CC50XPO4h3AycRMX0lL2ttAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="1"
        title="1"
        src="/static/cf662a1cf501555755fb8aa803622308/a76f4/1.png"
        srcset="/static/cf662a1cf501555755fb8aa803622308/12f09/1.png 148w,
/static/cf662a1cf501555755fb8aa803622308/e4a3f/1.png 295w,
/static/cf662a1cf501555755fb8aa803622308/a76f4/1.png 586w"
        sizes="(max-width: 586px) 100vw, 586px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">dct_1d</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">C</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> u <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">/</span> math<span class="token punctuation">.</span>sqrt<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token number">1</span>

    N <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>
    res <span class="token operator">=</span> numpy<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span>N<span class="token punctuation">)</span>

    <span class="token keyword">for</span> u <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>N<span class="token punctuation">)</span><span class="token punctuation">:</span>
        sum_var <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>N<span class="token punctuation">)</span><span class="token punctuation">:</span>
            sum_var <span class="token operator">=</span> sum_var <span class="token operator">+</span> arr<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">*</span> math<span class="token punctuation">.</span>cos<span class="token punctuation">(</span>math<span class="token punctuation">.</span>pi <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> u <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> N<span class="token punctuation">)</span><span class="token punctuation">)</span>
        res<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> math<span class="token punctuation">.</span>sqrt<span class="token punctuation">(</span><span class="token number">2.0</span><span class="token operator">/</span>N<span class="token punctuation">)</span> <span class="token operator">*</span> C<span class="token punctuation">(</span>u<span class="token punctuation">)</span> <span class="token operator">*</span> sum_var

    <span class="token keyword">return</span> res</code></pre></div>
<p>得到输出</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">first row
[  2.65134107e+03  -6.31674477e+01   6.20714540e+01   1.84602898e+02
  -3.57774391e+01   2.34703032e+02   8.13877704e+01  -1.82167471e+00
...
  -1.20049964e+00  -1.66465397e+00  -3.29829066e+00  -5.25334989e+00
  -2.67329063e+00   4.89008657e-01   1.39333862e+00  -2.11832230e+00]
first column
[  1.81779476e+03   5.97185841e+02   1.09031081e+02   1.90568707e+02
   1.42346997e+02   9.85597307e+01  -6.97990414e+01  -8.49555225e+01
...
-1.54346100e+00   7.88274867e-01   7.52136601e-01   1.18425906e+00
-1.10638153e+00  -8.38384846e-01  -3.58717920e-01  -3.44971891e+00]</code></pre></div>
</li>
<li>
<p>在整个图片上使用 2D-DCT
使用公式
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/14d472921b338ccdc9c2f1a702c95232/35372/2.jpg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 14.18918918918919%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAADABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3AUD/8QAFhABAQEAAAAAAAAAAAAAAAAAATEA/9oACAEBAAEFAmEN/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFhAAAwAAAAAAAAAAAAAAAAAAAAEQ/9oACAEBAAY/AhT/xAAYEAACAwAAAAAAAAAAAAAAAAAAIQExcf/aAAgBAQABPyG7Bggj/9oADAMBAAIAAwAAABCDz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABoQAQACAwEAAAAAAAAAAAAAAAEAESExUUH/2gAIAQEAAT8QFVLjqGwrddYAt7fZ/9k='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="2"
        title="2"
        src="/static/14d472921b338ccdc9c2f1a702c95232/1c72d/2.jpg"
        srcset="/static/14d472921b338ccdc9c2f1a702c95232/a80bd/2.jpg 148w,
/static/14d472921b338ccdc9c2f1a702c95232/1c91a/2.jpg 295w,
/static/14d472921b338ccdc9c2f1a702c95232/1c72d/2.jpg 590w,
/static/14d472921b338ccdc9c2f1a702c95232/35372/2.jpg 867w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">dct_2d</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">:</span>
    x <span class="token operator">=</span> arr<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    y <span class="token operator">=</span> arr<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
    <span class="token keyword">def</span> <span class="token function">C</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> u <span class="token operator">==</span> <span class="token number">0</span> <span class="token keyword">and</span> v <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token number">1.0</span> <span class="token operator">/</span> math<span class="token punctuation">.</span>sqrt<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token number">1</span>

    res <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">for</span> u <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> v <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">:</span>
            sum_var_x <span class="token operator">=</span> <span class="token number">0</span>
            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
                sum_var_y <span class="token operator">=</span> <span class="token number">0</span>
                <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">:</span>
                    sum_var_y <span class="token operator">=</span> <span class="token punctuation">(</span>sum_var_y <span class="token operator">+</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">,</span>j<span class="token punctuation">]</span> <span class="token operator">*</span>
                                 math<span class="token punctuation">.</span>cos<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> u <span class="token operator">*</span> pi <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span>
                                 math<span class="token punctuation">.</span>cos<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> v <span class="token operator">*</span> pi <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                sum_var_x <span class="token operator">=</span> sum_var_x <span class="token operator">+</span> sum_var_y
            res<span class="token punctuation">[</span>u<span class="token punctuation">,</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">/</span><span class="token number">4</span> <span class="token operator">*</span> C<span class="token punctuation">(</span>u<span class="token punctuation">,</span>v<span class="token punctuation">)</span> <span class="token operator">*</span> sum_var_x
    <span class="token keyword">return</span> res</code></pre></div>
<p>结果为</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">[[ 56100.  59925.  64005. ...,      0.      0.      0.]
 [  2550.   2805.  61710. ...,      0.      0.      0.]
 [ 64770.   1785.  62985. ...,      0.      0.      0.]
 ..., 
 [     0.      0.      0. ...,      0.      0.      0.]
 [     0.      0.      0. ...,      0.      0.      0.]
 [     0.      0.      0. ...,      0.      0.      0.]]</code></pre></div>
<p>不过因为没有做优化，所以计算速度非常慢，大约半个小时以上。其实可以用先算系数矩阵然后矩阵相乘的方式改善代码</p>
</li>
<li>
<p>在<code class="language-text">8*8</code>块上使用
代码同上，选取最左上角的<code class="language-text">8*8</code>块
结果为</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">[[ 1020.     0.     0.     0.     0.     0.     0.     0.]
 [    0.     0.     0.     0.     0.     0.     0.     0.]
 [    0.     0.     0.     0.     0.     0.     0.     0.]
 [    0.     0.     0.     0.     0.     0.     0.     0.]
 [    0.     0.     0.     0.     0.     0.     0.     0.]
 [    0.     0.     0.     0.     0.     0.     0.     0.]
 [    0.     0.     0.     0.     0.     0.     0.     0.]
 [    0.     0.     0.     0.     0.     0.     0.     0.]]</code></pre></div>
</li>
<li>分析时间复杂度
从代码来看，时间复杂度为<code class="language-text">O(u^2*v^2)</code></li>
<li>
<p>PSNR after reconstruction by IDCT
首先实现IDCT
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/fc2665ff8eed605f982a84d71b16bbc5/4bdda/3.jpg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 51.35135135135135%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAd1XIyg//8QAFhAAAwAAAAAAAAAAAAAAAAAAARAg/9oACAEBAAEFAoC//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAHRAAAgEEAwAAAAAAAAAAAAAAAAERECExkUFh8P/aAAgBAQABPyFylzsh97F64zJ0/9oADAMBAAIAAwAAABBQD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABwQAQACAgMBAAAAAAAAAAAAAAEAETFRECFBof/aAAgBAQABPxDEidEAAF63JQbHPtoROwZ9/H//2Q=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="3"
        title="3"
        src="/static/fc2665ff8eed605f982a84d71b16bbc5/1c72d/3.jpg"
        srcset="/static/fc2665ff8eed605f982a84d71b16bbc5/a80bd/3.jpg 148w,
/static/fc2665ff8eed605f982a84d71b16bbc5/1c91a/3.jpg 295w,
/static/fc2665ff8eed605f982a84d71b16bbc5/1c72d/3.jpg 590w,
/static/fc2665ff8eed605f982a84d71b16bbc5/4bdda/3.jpg 875w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span>
在dct的基础上修改一下即可</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">idct_2d</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">:</span>

    x <span class="token operator">=</span> arr<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    y <span class="token operator">=</span> arr<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>

    <span class="token keyword">def</span> <span class="token function">C</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> u <span class="token operator">==</span> <span class="token number">0</span> <span class="token keyword">and</span> v <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token number">1.0</span> <span class="token operator">/</span> math<span class="token punctuation">.</span>sqrt<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token number">1</span>

    res <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">for</span> u <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> v <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">:</span>
            sum_var_x <span class="token operator">=</span> <span class="token number">0</span>
            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
                sum_var_y <span class="token operator">=</span> <span class="token number">0</span>
                <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">:</span>
                    sum_var_y <span class="token operator">=</span> C<span class="token punctuation">(</span>i<span class="token punctuation">,</span>j<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>sum_var_y <span class="token operator">+</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">,</span>j<span class="token punctuation">]</span> <span class="token operator">*</span>
                                 math<span class="token punctuation">.</span>cos<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span>u <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> i <span class="token operator">*</span> pi <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">0.1</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">*</span> x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span>
                                 math<span class="token punctuation">.</span>cos<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span>v <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> j <span class="token operator">*</span> pi <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">0.1</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">*</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                sum_var_x <span class="token operator">=</span> sum_var_x <span class="token operator">+</span> sum_var_y
            res<span class="token punctuation">[</span>u<span class="token punctuation">,</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1.0</span><span class="token operator">/</span><span class="token number">4</span> <span class="token operator">*</span> sum_var_x

    <span class="token keyword">return</span> res</code></pre></div>
<p>使用cv2.imshow看一下效果
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/7edd3513390a43b622df75fa82317054/eb3fa/4.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 52.70270270270271%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABJ0AAASdAHeZh94AAACiklEQVQozzWTW08aURSF5weVFkNjq8Z7FRFkcLhfnGEGuU8HBYwRLwhoEwTFijyoMdEnmxjQJ39AffFfrZ69kz5MzsmZPWt9e+0zkuJfh8ftgl+ssryGtTU3lHUfVDWBzZQOj8eNWMCHUiENRZERj4UQiwYRCiqIhP0wdBWmmYOub8AneyCl0pviYxWlUgmNRgPNZgvpdFqsTfT7fYRCISj+AGr7+8LUj0KxiGp1B+12G7lcTuyr6HS6ODg4gM32GZKW1BAOh2EYBrrdLt7f/4qCDovm83k4HA5Eo1Hek6CmaahUKnh7e8NwOOS6SqWMmelpBAIBSLqhc5Fpmuj1enh8fMTLywteX1+ZmumtEtPEYjFkMhnU63Xc3d3h+fkZo9EIt7e3cDqduLi4EIR6EtlsFuVyGV6vF1tbW+xM7S8tLTFtoVBgQ2p/b2+PiWl/f3+Ph4cHuFwubG9v4+rqClI6m4GmalheXobb7Uar1cJgMMD8/Dzi8ThTUxyWZSESifDZxMQE09/c3DDx+Pg4zs7OcHp6CskqWWK6Mubm5rgtIjs6OsLq6ipTk2uxUGTCRCLBRoqioFar8WAoVzqnPdFKxZ8mFwSDQSwuLmJfTJOCpjZInHKiNotiulT3XzSVSuHw8BCzs7NsTDfi4+MDkpEyeDrUjs1m4yxIgM5InAKnvKhFMiEhu90O2Stzi/SOzAbXAwaQItEIxuxjPBByo+vx9OcJ/cE1Gs0GqjtVrAih+nEdjq8OplxYWMCGuoHL35cYjobY3d1F97zL0UmmZYo/xQ2/KKSAT05O0DpuovOrjZASxMoPJ1ziKWTzsH/6gslvk5j6PoVkQkN2M4PL8x50NQmfRwBNzeAfxiXrrxJDrgkAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="4"
        title="4"
        src="/static/7edd3513390a43b622df75fa82317054/fcda8/4.png"
        srcset="/static/7edd3513390a43b622df75fa82317054/12f09/4.png 148w,
/static/7edd3513390a43b622df75fa82317054/e4a3f/4.png 295w,
/static/7edd3513390a43b622df75fa82317054/fcda8/4.png 590w,
/static/7edd3513390a43b622df75fa82317054/efc66/4.png 885w,
/static/7edd3513390a43b622df75fa82317054/eb3fa/4.png 1026w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span>
直接看的话，感觉没看出什么差别
计算一下PSNR</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">psnr</span><span class="token punctuation">(</span>img1<span class="token punctuation">,</span> img2<span class="token punctuation">)</span><span class="token punctuation">:</span>
	<span class="token keyword">def</span> <span class="token function">mse</span><span class="token punctuation">(</span>imageA<span class="token punctuation">,</span> imageB<span class="token punctuation">)</span><span class="token punctuation">:</span>
		err <span class="token operator">=</span> np<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">(</span>imageA<span class="token punctuation">.</span>astype<span class="token punctuation">(</span><span class="token string">"float"</span><span class="token punctuation">)</span> <span class="token operator">-</span> imageB<span class="token punctuation">.</span>astype<span class="token punctuation">(</span><span class="token string">"float"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">)</span>
		err <span class="token operator">/=</span> <span class="token builtin">float</span><span class="token punctuation">(</span>imageA<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> imageA<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span> err
	<span class="token keyword">return</span> <span class="token number">10</span> <span class="token operator">*</span> math<span class="token punctuation">.</span>log<span class="token punctuation">(</span><span class="token number">255</span> <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">/</span> mse<span class="token punctuation">(</span>img1<span class="token punctuation">,</span> img2<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></div>
<p>结果为</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">114.916476293</code></pre></div>
<p>相似度很高</p>
</li>
<li>
<p>What if only using 1/4,1/16, 1/64 DCT coefficients
为了方便，我直接选用了左上角的矩阵</p>
<ul>
<li>
<p>当为1/4时，选取1/2,1/2的矩阵
按照上一步相同的步骤操作，得到图像
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/9f3dd6dbfe9a7016b73a7a6732fbf2b8/0d1a4/5.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 52.70270270270271%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABJ0AAASdAHeZh94AAACjElEQVQozzWSWU9aURDH77dpomlSqS9WREQQFGXzclE2N8pWpVz3pWIFJZY0LjHVFqWN+NBUo9E3ExO/2q93TtOHk3NOMvPfZrR4PIYRDROfjKpbTjIRI/t+Rp2oHiIUCqDrEYaG3AQDo4yOjjAy7FW3YeikUwnC4SAD/Q60yclJ5ubmKJU+Uq1WWV5ZIZfPs79f5/j4GI9nyCKLs7S0TCwWY2FhgfX1dfb29shkMmxtbak66et81YEWj8dJJBJks1mazSYvLy9sbGxQKBRIpVL09PSQsGqkWdd1pqen2dzc5Pn5mVarxczMDKZp0mvvxT/oQ0smk8zOzlIulzk/P+fm5oa7uzvu7+8RMlFUyOWVC/nncjlL/T7tdpuHhwdub29pNBoEgkE+rWz+syxg0hgKhdjZ2eHx8ZHFxUUCgQCnp6dkLDBxIORid2JigqmpKa6vr7m4uMDn87Fd2WZreQMtnU4rdqfTyfj4OIeHhxwdHWGz2RSJvFPJlIpAFEqOdrud1dVVBSaCpPf45IRyoYRWLBbx+/0MDg4qpfV6Xd1er1epPTs7sxRmkDpR1t/fr4ArlQq1Wo1IJKLUHlmD2a/U0CRswzAIWhmMjY2pImmUAQj409MT88V5BSiRCJjL5bK2oqTsy1vUtn795E/7N5o0SzbDw8N0d3crZglerEj4zR9NIuEw/51IPJ0dHdauJtnd3VU5m2WTy9YlSx9MNAFyOBxKncfjUawylGqtysGXAwrFgqUsiLloYntrI2pEcQ441WbIml21r1hbW6PxtYHL7kQTIJHtdrvVjsl0D+oH7FY+Y+gGHpebkD9APpOj6/Ub+t7ZGehzkpvLYi6U+f7tnKlkmmhEx97Vw19RGehq6581+AAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="5"
        title="5"
        src="/static/9f3dd6dbfe9a7016b73a7a6732fbf2b8/fcda8/5.png"
        srcset="/static/9f3dd6dbfe9a7016b73a7a6732fbf2b8/12f09/5.png 148w,
/static/9f3dd6dbfe9a7016b73a7a6732fbf2b8/e4a3f/5.png 295w,
/static/9f3dd6dbfe9a7016b73a7a6732fbf2b8/fcda8/5.png 590w,
/static/9f3dd6dbfe9a7016b73a7a6732fbf2b8/efc66/5.png 885w,
/static/9f3dd6dbfe9a7016b73a7a6732fbf2b8/0d1a4/5.png 1036w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span>
肉眼上没看出什么区别
计算一下psnr</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">83.1366893938</code></pre></div>
<p>虽然肉眼没看出什么区别，不过psnr的值的确下降了一些</p>
</li>
<li>
<p>当为1/16时，选取1/4,1/4的矩阵
同上操作，得到图像
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/427d5704518ac28a8a29a5ee7faed84e/42de8/6.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 52.70270270270271%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABJ0AAASdAHeZh94AAACn0lEQVQozzWSW08aURSF59807QNKYhqbSAqiVgQGmAsOUBgGZpCLMxhRLhGJBYqIgIaLaHzwxQcjjSYmTZv46v9aPeeYPp39sM9a3157c6IkgOd9kGUJoVAQgQBPahHplIadHQM+vw+qIsHMGRBCAXyPKYhGwgiHRSiKDEPXULQK0JJxeDwb4FKpFJLJJIrFItrtNlqtFjKZDHtHoxEx4xGNxlCuVCFJEnZ3d1GpVnF+3ieGWVQqFQwGQ+zvl/Dxw0dwCTVBnBSk02lcXl7i7e0NZ2dnyGazMAwDS0tLUBMJ8nmHCIpQVRW1Wg2vr694eHggPTpKpRKWl5ehyNvg1KQKTdMY4cXFBe7u7vD8/IyXlxcmQkUt02J1LBZjRpT+5uYG8/mc9Q0GA/AkqtN2550wn8sxwa2tLRweHuLp6QkHBwfY3NxkzTkiks/n2SSUThAEEkMU9/f3mE6ncLlcOD4+RvtHC5yRMchIKlZXV8lSQuh0OhgOh1hZWYGu6+j3+0hpKZimiUgkwnJ0OBwsu9lsxoSdTiebrlaugjMtE7yfh9vtRo6QNptNHB0dMVr6aTweM7r/gpSGktbrdXS7XXIVAWZMJ5lNrsDlC3nIkgxRFBklbUyQJfj9fpYVHZ+GTrcbDAYRj8cZIc2yXC6zmsZwe3uLv7//0KUkmaAsy1hYWGAZUkJK0Wg0MJlMIBEzy7JYpvTMbDYbucMwi4dS7+3t4fr6GmbBBCeIAhYXF+H1elkWhUIBj/NHjMYjNNstFAhZIBhAnYRut9vJQkJkEhd0ci7TqyvMf81RrVVx2j3F+to6OKtoEUIJEeXdqdfrodk4QbN+AsEXhNvhhO+bB2mVkH2ykWU54fy6BjWmIqPp6P3sYlsMw7vhwRf7Z/wDIlTrGuAlNk0AAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="6"
        title="6"
        src="/static/427d5704518ac28a8a29a5ee7faed84e/fcda8/6.png"
        srcset="/static/427d5704518ac28a8a29a5ee7faed84e/12f09/6.png 148w,
/static/427d5704518ac28a8a29a5ee7faed84e/e4a3f/6.png 295w,
/static/427d5704518ac28a8a29a5ee7faed84e/fcda8/6.png 590w,
/static/427d5704518ac28a8a29a5ee7faed84e/efc66/6.png 885w,
/static/427d5704518ac28a8a29a5ee7faed84e/42de8/6.png 1033w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span>
肉眼已经可以明显看出区别了，idct后的图片明显要模糊一些
算一下psnr</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">68.8003118691</code></pre></div>
<p>psnr有所下降，不过和上一步相比的话并不算多。只单纯从图像上看我还以为要降很多</p>
</li>
<li>
<p>当为1/64时，选取1/8,1/8的矩阵
同上操作，得到图像
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/d343cb30d023a50b57cf375ad5731277/eb3fa/7.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 52.02702702702703%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABJ0AAASdAHeZh94AAACO0lEQVQozzVSSU9iYRB8v0oQPIgBlE2WAQRkke09dgYCiEgCmLBvJhgvDDERuABHOHjlj9V83ZM5fEnzqK6qrm4plVbgdNr5eb0euFwOOOz3CAR8SIv/otEI7u6MKCoxhEIBeD0uhIJ++H0egf+FSCSIQiGLTFqG03EPqdvtCWAIiUQCpVIJk8kEjUYDuVweg8EA7XYHFxcqPD/XRXNEvCdBUMRwOMLra1OIpkEcb29vUKlUkIgoGAwKRwGkUims12ucz2dB8IxarQaz2QyD3oCUrDDO7/NBlpP4+vpiXLPZRKVSgdVqhcPhgEQk4XAYyWQS1WoV4/EYq9UKp9OJm7xeL2rie0pREBYOyUC5XGbccrnE8XjEdruF3W5Hv9+HlMvl8Pj4KMYo8EhGoxHz+Rzf399c5/N5tFttKMIhRZPJZESuUej1eoxGI2w2G5hMJhb6+PiApAhl+uH3+6HRaDgTypHcqtVqVq1WK0gKTEJM8R9HE5FLGler1Yqs2yLXISRyRaqkQjlQTSTU4PF4MJvNMBcvHo8jk80yjnL9t4wuyBDFQvVut4MUjoQRi8U4x9vbWxgMBla7ublhks/PT6z+rPAktkuj0mIsFgt0Oh1arZY4qTvunU6n+Pn5gVQoFsTtuXhDpHx1dcVqvV6PXSwWCyTiCUSfonwJNpuNJ7m8vGRCGluWZby/v/OyJDoPUqQcyN3DwwPq9ToOhwM31F9eoLu+xu9iEW63m3MlHNV0Vvv9Hp1Oh2sy9hfIFcFE2bzB5wAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="7"
        title="7"
        src="/static/d343cb30d023a50b57cf375ad5731277/fcda8/7.png"
        srcset="/static/d343cb30d023a50b57cf375ad5731277/12f09/7.png 148w,
/static/d343cb30d023a50b57cf375ad5731277/e4a3f/7.png 295w,
/static/d343cb30d023a50b57cf375ad5731277/fcda8/7.png 590w,
/static/d343cb30d023a50b57cf375ad5731277/efc66/7.png 885w,
/static/d343cb30d023a50b57cf375ad5731277/eb3fa/7.png 1026w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span>
这时差别已经非常明显了，右边的图像变的非常模糊，不过大致的轮廓都还很清楚。其实也应该是这样，因为左上角对于dct来说对应了低频部分，舍去了高频部分会丢失一些图像细节，不过大致轮廓还会显示出来
算一下psnr</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">59.7402291887</code></pre></div>
<p>psnr有所下降，不过并不算多，意外的降得很少。或许psnr值与人眼的直接感受的敏感度有不少差别</p>
</li>
</ul>
</li>
</ul>
<p>为了方便，直接在之前的基础上修改代码</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python">arr <span class="token operator">=</span> np<span class="token punctuation">.</span>float32<span class="token punctuation">(</span>gray<span class="token punctuation">)</span>
dst <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">512</span><span class="token punctuation">,</span><span class="token number">512</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">512</span> <span class="token operator">//</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">512</span> <span class="token operator">//</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        dst<span class="token punctuation">[</span>i<span class="token operator">*</span><span class="token number">8</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">,</span> j<span class="token operator">*</span><span class="token number">8</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">=</span> dct_2<span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">:</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">,</span>j<span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">:</span><span class="token punctuation">(</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

idct <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">512</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">512</span> <span class="token operator">//</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">512</span> <span class="token operator">//</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        idct<span class="token punctuation">[</span>i<span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">:</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">,</span>j<span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">:</span><span class="token punctuation">(</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">=</span> idct_2<span class="token punctuation">(</span>dst<span class="token punctuation">[</span>i<span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">:</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">,</span>j<span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">:</span><span class="token punctuation">(</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
idct <span class="token operator">=</span> idct <span class="token operator">*</span> <span class="token number">255</span></code></pre></div>
<p>先生成一下图像看一下结果
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/bac9cdba154dc52b76f5269177a3b9a8/b12f7/8.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 53.37837837837838%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABJ0AAASdAHeZh94AAACmElEQVQozzWSS08aURiG5xeZmOjKlcEiVAeQiyKlIEJALioiGRAdSARBsMxw0WhSbLiK0aCICxMTN9SFG+3K3/P2nK/pYnIyM+c85718gslkgLj4FRbLEgxGEaK4ALPZBLf7O7xeDxbZu2VRh53NDcTjUWwEfAiH/NjaDCISDmB93YVVuxU+rxuxnS0Ia2tr8Hg82N7eRjabRSaTgd/vRy6XQ71ex9KSGTqdHtVaHYPBABcXF1AUFbKcRuPyEuWyAklK4Ogoj8/PTwgulwt2u52p8aJarWI8HiOfzxOUP5OTk9hP7RPo+voajUYDx8fH0Gq1zImZvheLRby8vOD29vYf8L/CWq2GTqeD+/t7DIdDBINBcAd1po6r7Xa7BJBlGfyc0WgkqM/nw9PTE6LRKASn08myiNCLKIpMvkTAVCrFrOpwcnKCQr5A6q+uriiKVquFXq9HQhwOB12uKApCoRAEbpX/0Gg0MBgMKBQKpHRmZoZi4MBcNodKpULAZrOJ19dXqKrKClnH2dkZ3t7eWGFxJBIJCJFIhECzs7MIh8M4PDwkdXq9HslkkoVeRuNngxS0223K6ubmhvZxN/1+n6LgQB6PwHOyWq2UBQ86nU6TYm6ft84PP45GVARvmUOfn58pSz4R/IJSqURipqenIbjdbqysrBBwYmKCbo3vxmGz2ejA6ekp8mwkVDYqIwY+Pz/H+/s7Ncod8JXbD/gDpFIwmUyYmpqCka2aOQ1iuzEM7gYoK2UqILoTZYMchlpR8fHnA8OHIca/x+izEYrFYnB8c9BeKSFh9PgIgVfO7c1/0WLZYsNmKAJ57wDFXAHLZhv0c/NwrTqxJyXxcDdEr9NDr91F5iCNRFzCgv4r0vsyyqUfaP1q4i8OqhlsoRNkzwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="8"
        title="8"
        src="/static/bac9cdba154dc52b76f5269177a3b9a8/fcda8/8.png"
        srcset="/static/bac9cdba154dc52b76f5269177a3b9a8/12f09/8.png 148w,
/static/bac9cdba154dc52b76f5269177a3b9a8/e4a3f/8.png 295w,
/static/bac9cdba154dc52b76f5269177a3b9a8/fcda8/8.png 590w,
/static/bac9cdba154dc52b76f5269177a3b9a8/efc66/8.png 885w,
/static/bac9cdba154dc52b76f5269177a3b9a8/b12f7/8.png 1020w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span>
好像哪里不对，psnr也只有<code class="language-text">19.2240715552</code>，应该是代码bug。继续修改代码</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python">arr <span class="token operator">=</span> np<span class="token punctuation">.</span>float32<span class="token punctuation">(</span>gray<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">255.0</span>
dst <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">512</span><span class="token punctuation">,</span><span class="token number">512</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">512</span> <span class="token operator">//</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">512</span> <span class="token operator">//</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        dst<span class="token punctuation">[</span>i<span class="token operator">*</span><span class="token number">8</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">,</span> j<span class="token operator">*</span><span class="token number">8</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">=</span> dct_2<span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">:</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">,</span>j<span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">:</span><span class="token punctuation">(</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

idct <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">512</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">512</span> <span class="token operator">//</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">512</span> <span class="token operator">//</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        idct<span class="token punctuation">[</span>i<span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">:</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">,</span>j<span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">:</span><span class="token punctuation">(</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">=</span> idct_2<span class="token punctuation">(</span>dst<span class="token punctuation">[</span>i<span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">:</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">,</span>j<span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">:</span><span class="token punctuation">(</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
idct <span class="token operator">=</span> idct <span class="token operator">*</span> <span class="token number">255</span></code></pre></div>
<p>图像为
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/c9d2056d9f2960c7d911f5d76869113c/d0143/9.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 52.70270270270271%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABJ0AAASdAHeZh94AAACcUlEQVQozyVS2U4iURTsD/JFCOoTcUVxWJpmbfalQXZUJFFZDIzKKhExRGNMTEiIMRKJ8wfE+a6ae848nPTN7XPr1KkqSXHKsFp/QXE6YLdb+exQZITDQWhaHBarBQGXjFI2BUWxw+/3wK964HEr8HqdiEVDyOfTSMTDcDiskGLxOCKRCEqlEprNJlqtFpLJpPj+xnj8CNWnimEuVGt1OJ1OZHM5lM/O0O12kclkcXpaRr/f53c6nQ5SWID5vD4kEgkMBgMsl0tu0DQN2WwWer0eqqrymQBp+MnJCf58f2OxWCCVSgnQU+zs7MBms0GKRKOIRqIoFAq4v7/HdDrF19cXFzUGAgEcHx8jnU4zMAHU63W8vr7i8/OT6+3tDQcHB2h3OsQwLKhnUC6XhYZ2fjyfz3F9fY29vT30ej2hUZ7L4/Hg4uICoVAILpcLz8/PmM1mkGWZMcaPY0haUkNUsNzf34fZbGagyWSCra0t+Hw+Zk3rk8Zer1eYFcbGxgYPeHp64vVJu9vbW8GwDalQLEC2y9jc3OQpZEyj0cDh4SE3j0Yj5IQRBEDMtre3mVG1WkW73eY70rbb6eLl5QVSLp8TcVB4BZPJhFqthqOjIwa8urrCx8cH3xEg9ZGmu7u7iMViPJwGFItF3uTn7w/FJga32821srLCrCqVCj++vLxk8YPBID+iIWTK6uoqLBYLbm5u/kdJJODh4QF3wztIpNP6+jozJN3IbRKaIkSrn5+fs760osFgEOF1MCsyiOL1/v6OM5HL4XDI4JLqV7G2tgaj0cjN9JOcpSjQWqQXuU/glEkCo16SgDYhSSghZBYN/gedB+0qyQYxkQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="9"
        title="9"
        src="/static/c9d2056d9f2960c7d911f5d76869113c/fcda8/9.png"
        srcset="/static/c9d2056d9f2960c7d911f5d76869113c/12f09/9.png 148w,
/static/c9d2056d9f2960c7d911f5d76869113c/e4a3f/9.png 295w,
/static/c9d2056d9f2960c7d911f5d76869113c/fcda8/9.png 590w,
/static/c9d2056d9f2960c7d911f5d76869113c/efc66/9.png 885w,
/static/c9d2056d9f2960c7d911f5d76869113c/d0143/9.png 1025w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span>
看来这样是正常了，看一下psnr</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">121.015204859</code></pre></div>
<p>比之前全局dct的时候还要高，虽然肉眼没看出什么区别</p>
<p>计算每一块的psnr，并计算平均值</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python">psnr_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">512</span> <span class="token operator">//</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">512</span> <span class="token operator">//</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        temp_psnr <span class="token operator">=</span> psnr<span class="token punctuation">(</span>idct_res<span class="token punctuation">[</span>i<span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">:</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">,</span>j<span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">:</span><span class="token punctuation">(</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">,</span>gray<span class="token punctuation">[</span>i<span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">:</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">,</span>j<span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">:</span><span class="token punctuation">(</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        psnr_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>temp_psnr<span class="token punctuation">)</span>
        <span class="token keyword">print</span> <span class="token string">"i : "</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token string">" j : "</span><span class="token punctuation">,</span> j<span class="token punctuation">,</span> <span class="token string">"psnr : "</span><span class="token punctuation">,</span> temp_psnr

<span class="token keyword">print</span> <span class="token string">"average psnr : "</span><span class="token punctuation">,</span> <span class="token builtin">sum</span><span class="token punctuation">(</span>psnr_list<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token builtin">len</span><span class="token punctuation">(</span>psnr_list<span class="token punctuation">)</span></code></pre></div>
<p>结果为</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">i :  0  j :  0 psnr :  126.023528441
i :  0  j :  1 psnr :  114.127687772
i :  0  j :  2 psnr :  118.074229692
i :  0  j :  3 psnr :  117.756742709
i :  0  j :  4 psnr :  114.80210058
i :  0  j :  5 psnr :  134.496507044
i :  0  j :  6 psnr :  123.510384158
i :  0  j :  7 psnr :  126.023528441
i :  0  j :  8 psnr :  122.456779001
i :  0  j :  9 psnr :  127.565035239
i :  0  j :  10 psnr :  131.61968632
i :  0  j :  11 psnr :  inf
i :  0  j :  12 psnr :  116.578912352

...

i :  63  j :  51 psnr :  125.333599726
i :  63  j :  52 psnr :  116.578912352
i :  63  j :  53 psnr :  115.525307196
i :  63  j :  54 psnr :  127.565035239
i :  63  j :  55 psnr :  123.510384158
i :  63  j :  56 psnr :  124.081968296
i :  63  j :  57 psnr :  111.983589058
i :  63  j :  58 psnr :  129.388250807
i :  63  j :  59 psnr :  114.127687772
i :  63  j :  60 psnr :  118.074229692
i :  63  j :  61 psnr :  141.42797885
i :  63  j :  62 psnr :  128.435149009
i :  63  j :  63 psnr :  131.61968632
average psnr :  inf</code></pre></div>
<p>不过看来其中有inf，去除inf再次计算平均值</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">512</span> <span class="token operator">//</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">512</span> <span class="token operator">//</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        temp_psnr <span class="token operator">=</span> psnr<span class="token punctuation">(</span>idct_res<span class="token punctuation">[</span>i<span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">:</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">,</span>j<span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">:</span><span class="token punctuation">(</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">,</span>gray<span class="token punctuation">[</span>i<span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">:</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">,</span>j<span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">:</span><span class="token punctuation">(</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> temp_psnr <span class="token operator">!=</span> <span class="token builtin">float</span><span class="token punctuation">(</span><span class="token string">'inf'</span><span class="token punctuation">)</span>
			psnr_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>temp_psnr<span class="token punctuation">)</span>
        <span class="token keyword">print</span> <span class="token string">"i : "</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token string">" j : "</span><span class="token punctuation">,</span> j<span class="token punctuation">,</span> <span class="token string">"psnr : "</span><span class="token punctuation">,</span> temp_psnr</code></pre></div>
<p>结果</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">average psnr :  123.177068712</code></pre></div>
<p>进行量化</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python">Q <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">51</span><span class="token punctuation">,</span> <span class="token number">61</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			  <span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">,</span> <span class="token number">58</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">55</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			  <span class="token punctuation">[</span><span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">57</span><span class="token punctuation">,</span> <span class="token number">69</span><span class="token punctuation">,</span> <span class="token number">56</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			  <span class="token punctuation">[</span><span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token number">29</span><span class="token punctuation">,</span> <span class="token number">51</span><span class="token punctuation">,</span> <span class="token number">87</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">62</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			  <span class="token punctuation">[</span><span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token number">37</span><span class="token punctuation">,</span> <span class="token number">56</span><span class="token punctuation">,</span> <span class="token number">68</span><span class="token punctuation">,</span><span class="token number">109</span><span class="token punctuation">,</span><span class="token number">103</span><span class="token punctuation">,</span> <span class="token number">77</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			  <span class="token punctuation">[</span><span class="token number">24</span><span class="token punctuation">,</span> <span class="token number">35</span><span class="token punctuation">,</span> <span class="token number">55</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">81</span><span class="token punctuation">,</span><span class="token number">104</span><span class="token punctuation">,</span><span class="token number">113</span><span class="token punctuation">,</span> <span class="token number">92</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			  <span class="token punctuation">[</span><span class="token number">49</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">78</span><span class="token punctuation">,</span> <span class="token number">87</span><span class="token punctuation">,</span><span class="token number">103</span><span class="token punctuation">,</span><span class="token number">121</span><span class="token punctuation">,</span><span class="token number">120</span><span class="token punctuation">,</span><span class="token number">101</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			  <span class="token punctuation">[</span><span class="token number">72</span><span class="token punctuation">,</span> <span class="token number">92</span><span class="token punctuation">,</span> <span class="token number">95</span><span class="token punctuation">,</span> <span class="token number">98</span><span class="token punctuation">,</span><span class="token number">112</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">103</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

Q <span class="token operator">=</span> <span class="token number">0.1</span> <span class="token operator">*</span> Q
Q <span class="token operator">=</span> Q <span class="token operator">/</span> <span class="token number">255.0</span>

arr <span class="token operator">=</span> np<span class="token punctuation">.</span>float32<span class="token punctuation">(</span>gray<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">255.0</span>
dst <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">512</span><span class="token punctuation">,</span><span class="token number">512</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">512</span> <span class="token operator">//</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">512</span> <span class="token operator">//</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        dst<span class="token punctuation">[</span>i<span class="token operator">*</span><span class="token number">8</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">,</span> j<span class="token operator">*</span><span class="token number">8</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">=</span> dct_2<span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">:</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">,</span>j<span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">:</span><span class="token punctuation">(</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">//</span> Q <span class="token operator">*</span> Q</code></pre></div>
<p>看一下效果
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/9068efd3f1ad2a3ea8f35c80af2c9701/44a54/10.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 52.70270270270271%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABJ0AAASdAHeZh94AAACX0lEQVQozx1T207qQBTt//Ds8dHEY+CICC03wQKFQgsIlEuJChpuAkqAqPCi8RYhYkJI8Bv8sXVm74fJZGa6123vSoGAH8ceN0JBPxTZC5/XA79fhqbFYZoZyIoM5dgNu5jFyUkIp9EwYmoEkUhIrCC0hIp8zoCRSfGbpKfTSCQ0lMtldDpdDAYDZDIGut0u5vM5dF3H/v5fdHs3iMViKBSKsO06hsMh6vU6LFHXFzXD21vE43FICS0hmE+4cDQa4ff3F4+Pj0indVilEnZ2dhD0B1ARhVRA35XE/evrK9brNWq1Gi/TNOHz+SAlk0lhT0OxWMT9/T0WiwV+fn6w3W7RbDaZzK7ZsCwLqVQKuVwO5+fnmM1meHt7w8fHBy8CbDQapFBDNptl+YqiCEsFbDYbTCYTHBwc4FZYqVhlVCoVtnxxccHkJIIcfX5+clyEQYKkjJFBUkvC7XbD6XSKHDt4fn6Gy+WCLMusxDQMVKtVBiGFgUCAQafTKfr9Po6OjtjN3d0dpJJVYmV7e3ssmwBpeTweVkt52tUaW87n84hGo5zl5eUlg5FyOvd6PYzHY0gFwUSAoVCIFVIOFDopvL6+xmq1wmQ84bu0mAhaBEB5EjHtZ2dn3PXv728aG13MYFDMVAQOh4MLKSfqGO3v7+/ImVnuJDWQVBN5UNQQIJ0pBlL48vIC6VQ9xe6fXYTDYbZNtpbLJR4eHnB1dcXz+M/p4p06rqoqK6QGtVot7jC5ouZRrpIaU3nWCMzr9XK36fHr64vtEYj78BDtdlv8QX4mpjsipm+fnp5YKZ2J5D8n7/QiGsKhfgAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="10"
        title="10"
        src="/static/9068efd3f1ad2a3ea8f35c80af2c9701/fcda8/10.png"
        srcset="/static/9068efd3f1ad2a3ea8f35c80af2c9701/12f09/10.png 148w,
/static/9068efd3f1ad2a3ea8f35c80af2c9701/e4a3f/10.png 295w,
/static/9068efd3f1ad2a3ea8f35c80af2c9701/fcda8/10.png 590w,
/static/9068efd3f1ad2a3ea8f35c80af2c9701/efc66/10.png 885w,
/static/9068efd3f1ad2a3ea8f35c80af2c9701/44a54/10.png 1017w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span>
好像不怎么好
psnr为</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">31.0463837901
average psnr :  32.0848558543</code></pre></div>
<p>使用 <code class="language-text">a*Q</code> 量化，使<code class="language-text">a=0.1</code>时
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/3516f04d3ae889cc188444bc42c940f7/ad997/11.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 53.37837837837838%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABJ0AAASdAHeZh94AAACWklEQVQozzWS20sqYRTF5/8JEgJLyPLBe+kcddS84C1Ly9LKW1RmF1BTpKBSSCnoISKxevGxx/6vdWbtw3kYvm9m9l7fb639Kevrbricdng8a3C7HPJ49X0oFEA0EobDYUNcU5FJxqCqawhqf6AFvPD71qH5vXpNEOlUHKGgT/+uQkmlUshkMigdHKDZbOL4+Bjb29totVp4fHzUhUNIpzOo1+uyL+ztoVKpotE4l76TkxPc3t7i7OwMi4uLUBKJBKLRKLa2tnB3d4efnx8R5nuhUMDCwgLi8Th2d3ehaZqIUHw2m+Hp6Uk/LI1yuQyn04nl5WUoyWQSpNzf38dgMMDX1xc+Pz/x8fGBYrGIcDgsK6kjkYisV1dX8p+ir6+vuL+/h81mw83NDRSeTrFKpYKNjQ1Uq1V8f3+j3+/D7Xaj3W5jT7e5s7MjpLS4ubkpEM/Pz5hMJnLQfyCFFrLZrDQ7HA50Oh2Mx2OYzWYRYD60T1FGQyGTySTUpMvn81haWkK32/1HyEKfz4fV1VVpop3T01MRJy1Jc7mcEMRiMVgsFsmSObOWdIyl1+vh4eEBCoMPBALyeL1eXF5eij3u2fD+/i6hU5A1bHa5XCiVSri4uBBnB/oNYY6/v79QOCVa8fv9mJ+fl2tDQVKT4uXlBRwcLXo8HqGdm5sTskajAbvdLoLM7+3tDQpPXVlZQTAYFDtHR0cywevrayHkFWHN4eEhjEajDI7xEGI4HGI0GkkPsyaUCPJCUowfOG3is5A0/M/mWq0Gg8EAq9UqACTmZZ5Op2Kfg1NVFX8BuvPrZybXF6UAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="11"
        title="11"
        src="/static/3516f04d3ae889cc188444bc42c940f7/fcda8/11.png"
        srcset="/static/3516f04d3ae889cc188444bc42c940f7/12f09/11.png 148w,
/static/3516f04d3ae889cc188444bc42c940f7/e4a3f/11.png 295w,
/static/3516f04d3ae889cc188444bc42c940f7/fcda8/11.png 590w,
/static/3516f04d3ae889cc188444bc42c940f7/efc66/11.png 885w,
/static/3516f04d3ae889cc188444bc42c940f7/ad997/11.png 1012w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span>
看起来不错，肉眼没看出什么差别
对于psnr</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">80.2997218444
average psnr :  80.453595816</code></pre></div>
<p>使<code class="language-text">a=0.5</code>
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/f1c010bba60cb090c526cf061ff8b34b/54bf4/12.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 52.70270270270271%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABJ0AAASdAHeZh94AAACYklEQVQozz1TW0sqYRSdn+RDQqWU9jJqOl5mJs275iXv3dU6hoqBRlqIFgiColAkig+99tvW+fY+cB4GZvZlrb3W3iMdH9tht8tQlGM4HDI/iuJEwK8jFArAZpOhKw4UMkmoPgX+E1XkVOiaBye6F2FRkxW5WDTI31I4HMbZ2RkqlQqazSZqtRoymQyenp4wGo3h9/uhuNxoPD7C51Nxfn6Oi4sLtFptfqe+breHXq8HWbZBCoVCCAaDSKfTGA6H+P39xaNoTgkSatgx7kATQMVCEZqmIhaLoVQq4evrC6vVCtlsFuVyGaenpzCbzZAikQji8TgXvb+/Y7PZYL1ec3GxWOTCQi7P4IFAgNVUq1XMZjNst1ssl0vM53OoqsrqJJqOGK6urlje3d0dF/b7feGfDc/Pz8KjLErF0v88TUV9g8GAyYmYrBuNRpCi0SjLlWWZAbrdLqbTKUwmEzeRDfFoDJVyhQGp9vDwkCf9+PhAu92G0Wjk6V5eXiDl83m43W4cHBywbCq4v7/H0dERbm9v8fb2hkwqjUKhwNYQqcvlwsPDg1hMC9TvcDjQ6XTw+voKicb3er1igz4GJsBcLgen08kN39/fqFfrDEgTko8ejweJRIJBNE1DMplka35+fv4thR5iNRgMqNfrLIvAadtkejQcEZLLHCOyvb09norIKZZKpdiqz89PSBSwWq28JZJ9fX3NCbpJmvBPowGbuC8islgs0HVd/Ah2BqJbXSwWuLy85CUSsETSdnd32WgCJcDxeIzJZMLbJJkUJ/D9/X32kPyl47+5ueF7bAhSqiXb/gIVK+0UP4R+mAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="12"
        title="12"
        src="/static/f1c010bba60cb090c526cf061ff8b34b/fcda8/12.png"
        srcset="/static/f1c010bba60cb090c526cf061ff8b34b/12f09/12.png 148w,
/static/f1c010bba60cb090c526cf061ff8b34b/e4a3f/12.png 295w,
/static/f1c010bba60cb090c526cf061ff8b34b/fcda8/12.png 590w,
/static/f1c010bba60cb090c526cf061ff8b34b/efc66/12.png 885w,
/static/f1c010bba60cb090c526cf061ff8b34b/54bf4/12.png 1007w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span>
图像开始不清晰
psnr为</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">43.7616530849
average psnr :  45.26357418</code></pre></div>
<p>使<code class="language-text">a=0.3</code>
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/5e5446b902ff2c99e6ee20d052e52f5d/2bef9/13.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 52.02702702702703%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABJ0AAASdAHeZh94AAACKElEQVQoz02S22oiQRCG56G8CIJercZT4mqcGMc5qGMcXTXrERVPSVSiiAlqrlUUkZAIeYCAj/ZvV0GWXDRNN39VffVXSYaiInDhg9/nQTB4wbdPnHAoCF2LIxqV4XH/Qt7UEVeikCO/ocRkcYcgyyFo6g2ylgkzpYuYS0ij+yF0w4BpmiiVShiNRqjX6ygUCphMJnh6eoLT6USj2YKm6zCMBO7u7jAYDFGpVJHL/WENxdntdkhW8haqpoqqMViWhdVqhdPphFqthnK5LKiDnDCfzyMejyMWu0Emk8F6vcbX1xcXL5X+ss7n80HKpjKCUBfIKVSrVSwWC+x2O3x+fmK/3yMSiTA5EauqipTQUaGfusPhwAkHgwGkoiUqq3Fugwi9Xi/G4zHe3985WTqdxnA4/E9YLBaZkHRkydvbm/BSRjKZxHK5hJQzLZhpE5qmweFwQBc+zWYz9Ho92Gw2PDw8oNVqIZvNMt23LpFIsK7ZbOLs7Iz1BCIZio58IQ+/3w+Px8MEVJlapDam0ym/iT6XyzEZHdLRMOjv6uqKu9hut5D0mIbbzC0UReGkbrcb/X4fLpeLKV5fX7HZbLhNev/UdbtdhjDEljw/P/OQpILw8Dp6jXA4jEAgwPiPj49ot9ucZD6fi/WosEcxsQnkK02TdGQHtUor9/LywjFSs9LAZfCSd4iqhUIh9uzj44MDiPb8/JwnTcm+dQTQaDRwPB45aafT4db/AehOwHEYuCqTAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="13"
        title="13"
        src="/static/5e5446b902ff2c99e6ee20d052e52f5d/fcda8/13.png"
        srcset="/static/5e5446b902ff2c99e6ee20d052e52f5d/12f09/13.png 148w,
/static/5e5446b902ff2c99e6ee20d052e52f5d/e4a3f/13.png 295w,
/static/5e5446b902ff2c99e6ee20d052e52f5d/fcda8/13.png 590w,
/static/5e5446b902ff2c99e6ee20d052e52f5d/efc66/13.png 885w,
/static/5e5446b902ff2c99e6ee20d052e52f5d/2bef9/13.png 1024w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span>
psnr为</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">55.4620216976
average psnr :  57.1084289312</code></pre></div>
<p>感觉细节丰富的地方容易产生不清晰，可能是因为高频信息被量化的比较狠的缘故，或者是代码bug</p>
<p>现在看来还是a = 0.1时最好，量化矩阵可以取<code class="language-text">a*Q</code>，适当减轻了高频信息，保留低频信息，并且也不显得整体模糊</p>
<p>对于别的图片进行尝试
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/9e2f009cca1b03de5171faebfc494871/709cb/14.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 52.70270270270271%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABJ0AAASdAHeZh94AAACu0lEQVQozx2TSy/jURjG/wxtpzcSl1RNVGmreqEz9JaptlOmOsxog6kQJMKUiUs0iIXLwoIIkdhZiETYYGFhS2yEjC9g56v85n/O4s3JOTnv87zP85yjNDY28OmTFbvdJsvn9RAOBfF43LS3+3E4mvnidhH87MflbMLrceFpdRFo9xL7GiYS6aSjo51gZ4B4VxSludmB291KXV0dc3NzKkiAnZ0denp6mJycZHR0FK32IwajkUAggNFoor//J8nkN/IjIywsLhIMhVheLuL3+1Hm5+dVlgh7e3tcXV3R1tbG4+OjBM1mszw/PxOPxRkYGGB8fJxMJsPr6z/S6TRbW1s8PT0RUgFvbm5kKXa7XYLc398zPDyMy+Xi9vaWu7s7LBYL29vb5Id/09LSQnV1NYeHh5ycnFBfX8/Kygpvb2/09vaSSqV4eHhA6e7uZm1tjdPTU4aGhiTo9fU1xWKRqakpwuEw2V8DeH1eZmZmODg4kGp8Ph9nZ2dsbm7KfmGHWBUh4fz8XALZbDZ5cX9/n42NDSnLYDBgtVhxOp0cHx/LcyGxtraW1dVVeXd6elrupYdiwvX1dcbGxhDyC4UCR0dHzM7OSknJZJKmxiYSiYQMSZw5HA5isRi7u7tqGMssLS0xogbkdrtRcrmclCGqq6uLy8tLXl5eJIEIoVed8u/snCQQdXFxweDgIAsLC7y/v0vJ+XyeiYkJ6aMiTA8FQ5SVlWE2m7E12Mhlc0QjUcmo0Wikh0KumKKqqgqdVkdNTY1MvK+vD6/XKyWLoJTKykoURUGj1WAymzCaTNib7ITCIeKJONVqowBosDVQ+qGUktIS9AY9FZUViF7hWzQalR5LLG1pOWa9EUO5+ng1eqw1FgpTM3THU8QjMfq+/8CsM0pSvU6PtlyLTqNDp66ZdIbCn4L8BOIDiLf6H6hHm6tIEDTfAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="14"
        title="14"
        src="/static/9e2f009cca1b03de5171faebfc494871/fcda8/14.png"
        srcset="/static/9e2f009cca1b03de5171faebfc494871/12f09/14.png 148w,
/static/9e2f009cca1b03de5171faebfc494871/e4a3f/14.png 295w,
/static/9e2f009cca1b03de5171faebfc494871/fcda8/14.png 590w,
/static/9e2f009cca1b03de5171faebfc494871/efc66/14.png 885w,
/static/9e2f009cca1b03de5171faebfc494871/709cb/14.png 1034w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span>
psnr</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">62.1518847038
average psnr :  107.223096725</code></pre></div>
<p>细节地方还是有些模糊，继续调节
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/8132901558c0be981184aa6781df6ecb/51ed8/15.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 52.70270270270271%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABJ0AAASdAHeZh94AAACgklEQVQozx2Syyv0YRTHn9K4lusCRc285vKb+5irdxYzJJdxnY1ESG5FhOSyIFIWyk4USXqRHRsLdsqCt9feys7/8Xmds3qe5zzfc873+z3HeC03rqZfWG4nTQ47AZ9FtDmM/+eMhIL4LA+pkJdYNITlaSLg9+Dzun7+/KR/J0gmmknEmwkFvfT35TDV1dU0NDRQVFTEwMAAlmUxPz9Pa2sruVyOvv4+bD9/JSUl+Hw+iouL6ejoIJPJMjg4qNhEIsH09DTt7e2Y5eVlBWxtbfHy8kI0GuXp6YmTkxONv76+0tbWpsnj4+N0dnby8fGPnp4eNjY2+Pv+TktLC9fXf7i/v8cEAgE8Hg+Pj4/azel0cnNzw9vbG263m+3tbUZHR/VeV1fH0dER5+fnNDY2srq6ytfXF/l8Xps+Pz9jUqkUU1NTXF5eMjw8TDab5erqivX1dSYmJggGg3R3dyONx8bGODw8ZH9/H7/fz+npKbu7u6ytrREOhxG1Rqjf3t6ysrKicmOxGBcXF8pMCtTX1+NwOJTh2dmZFhCvJL6zs6OMFxcX9S2+m0wmw+bmplKWAQlDeS8tLanRkUiE2tpa0um0vufm5lS6MBIPhcjCwgK9vb3E43GMTPLg4EBZyhDu7u74/PzUZJEggxBJIn9mZoaHhwe1Rvz7/v5mb29PlUgj8dqIH0NDQ8pCGEpnAYtvoVCI0tJSLXp8fMzk5CR2u52ysjJdNSk8MjKiKmpqajTXyG4ZYygoKKCiooLy8nKqqqrUdJEgQIkLWDCClYKVlZV6irfJZFJ9drlc8m90WW02my63JIs8WQUxuaurS+OCk1NwhYWFehcVs7OzyKbIXXL+A+ZEnhhmIeMuAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="15"
        title="15"
        src="/static/8132901558c0be981184aa6781df6ecb/fcda8/15.png"
        srcset="/static/8132901558c0be981184aa6781df6ecb/12f09/15.png 148w,
/static/8132901558c0be981184aa6781df6ecb/e4a3f/15.png 295w,
/static/8132901558c0be981184aa6781df6ecb/fcda8/15.png 590w,
/static/8132901558c0be981184aa6781df6ecb/efc66/15.png 885w,
/static/8132901558c0be981184aa6781df6ecb/51ed8/15.png 1021w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span>
psnr为</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">119.861063688
average psnr :  118.77862201</code></pre></div>
<p>全局psnr忽然就升了上来，已经很清晰了</p></section><hr style="margin-bottom:1.5rem"/><footer><div style="display:flex;margin-bottom:3.75rem"><p>Written by <a href="https://github.com/twistronics" style="background-image:none"><strong>twistronics</strong></a></p> <!-- -->  <!-- --> </div></footer></article><nav><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li><a rel="prev" href="/blogs/HSQLDB-code-analysis-6/img/">← <!-- -->HSQLDB (6)：恢复机制分析</a></li><li><a rel="next" href="/blogs/content-based-image-retrieval/">Preliminary Content Based Image Retrieval<!-- --> →</a></li></ul></nav></main><footer>© <!-- -->2021<!-- -->, Built with<!-- --> <a href="https://www.gatsbyjs.com" style="background-image:none">Gatsby</a></footer></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blogs/Peak-signal-to-noise-ratio/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-132e7336ce43746dfb98.js"],"component---src-pages-404-js":["/component---src-pages-404-js-e148cbc30da18de1fa3b.js"],"component---src-pages-all-tags-js":["/component---src-pages-all-tags-js-645f8c97e140c042bf1e.js"],"component---src-pages-index-js":["/component---src-pages-index-js-092cb2046be5cfa10eb1.js"],"component---src-pages-temp-temp-url-js":["/component---src-pages-temp-temp-url-js-680be0fb33681a9a530e.js"],"component---src-pages-using-typescript-tsx":["/component---src-pages-using-typescript-tsx-70bc48ec38f515df4eaa.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-c59b2b29c6b2ad001b4f.js"],"component---src-templates-tag-page-js":["/component---src-templates-tag-page-js-c57fb89be0496b78b9f2.js"]};/*]]>*/</script><script src="/component---src-templates-blog-post-js-c59b2b29c6b2ad001b4f.js" async=""></script><script src="/5d21eb57d7fc5176899f741e4bf094d3642ad4b0-0c04ee828cb752ae0b77.js" async=""></script><script src="/777cf710-733fd732338655e18562.js" async=""></script><script src="/styles-89fd2ae28bdf06750a71.js" async=""></script><script src="/app-132e7336ce43746dfb98.js" async=""></script><script src="/framework-f600a0dcdbbe2ab3be17.js" async=""></script><script src="/webpack-runtime-142e5cd5704972e4dd70.js" async=""></script></body></html>